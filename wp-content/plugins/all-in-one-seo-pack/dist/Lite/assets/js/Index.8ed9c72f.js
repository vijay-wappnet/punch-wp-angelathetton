import{at as y,d as L,ae as K,b as G,au as w,av as S,j as Z,I as z,i as X,D as x}from"./app-core.61d75c0b.js";import{u as $}from"./JsonValues.a0694556.js";import{S as ee,C as te,a as re,u as se}from"./Index.798f3a64.js";import{u as le}from"./Url.049479ea.js";import{_ as O}from"./Button.7fa2ada4.js";import{B as F}from"./Select.0f509ba4.js";import{C as W}from"./Index.104764b8.js";import{D as J}from"./vendor-datetime.430013a3.js";import{B as ae}from"./DatePicker.ef7bd0c7.js";import{B as ie}from"./Input.74b8f197.js";import{C as Q}from"./Tooltip.7f0ce0d2.js";import{_ as oe,S as Y}from"./Trash.effd183e.js";import{S as ue}from"./Plus.ad79c23b.js";import{_ as j}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as i,a as A}from"./vendor-other.2cdd5822.js";import{as as p,f as u,i as R,j as o,U as f,a0 as h,R as _,ae as b,O as E,ad as q,P as N,Q as U,M as v,aF as ne,T as de}from"./vendor-vue-ui.d70c869f.js";import{T as ce}from"./Slide.4a56936c.js";const g="all-in-one-seo-pack",ge={type:null,key:null,value:null,regex:null},he={emits:["redirects-custom-rule-error"],setup(){return{dateStringToLocalJs:K,rootStore:G()}},components:{BaseButton:O,BaseDatePicker:ae,BaseInput:ie,BaseSelect:F,CoreAlert:W,CoreTooltip:Q,SvgCircleQuestionMark:Y,SvgCirclePlus:ue,SvgTrash:oe},props:{editCustomRules:Array},data(){return{DateTime:J,strings:{customRules:i("Custom Rules",g),customRulesTooltip:i("Custom rules allow you to create redirects based on specific criteria. You can use these rules to redirect users based on their IP address, browser, or other criteria.",g),selectMatchRule:i("Select Rule",g),delete:i("Delete",g),add:i("Add Custom Rule",g),regex:i("Regex",g),selectAValue:i("Select a Value or Add a New One",g),key:i("Key",g),value:i("Value",g),startDate:i("Start Date",g),endDate:i("End Date",g)},customRules:[],rulesErrors:[],types:[{label:y.schedule,value:"schedule",taggable:!1,regex:!1,dateRange:!0},{label:y.login,value:"login",placeholder:i("Select Status",g),singleRule:!0,options:[{label:y.loggedin,value:"loggedin"},{label:y.loggedout,value:"loggedout"}]},{label:y.role,value:"role",multiple:!0,placeholder:i("Select Roles",g),options:Object.entries(this.rootStore.aioseo.user.userRoles).map(e=>({label:e[1],value:e[0]}))},{label:y.referrer,value:"referrer",regex:!0,singleRule:!0},{label:y.agent,value:"agent",regex:!0,taggable:!0,multiple:!0,options:[{label:y.mobile,value:"mobile",docLink:L.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)},{label:y.feeds,value:"feeds",docLink:L.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)},{label:y.libraries,value:"libraries",docLink:L.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)}]},{label:y.cookie,value:"cookie",keyValuePair:!0,regex:!0},{label:y.ip,value:"ip",placeholder:i("Enter an IP Address",g),taggable:!0,regex:!0,singleRule:!0},{label:y.server,value:"server",placeholder:i("Enter the Server Name",g),regex:!0,singleRule:!0},{label:y.header,value:"header",keyValuePair:!0,regex:!0},{label:y.wp_filter,value:"wp_filter",placeholder:i("Enter a WordPress Filter Name",g),taggable:!0},{label:y.locale,value:"locale",taggable:!0,regex:!0,placeholder:i("Enter a Locale Code, e.g.: en_GB, es_ES",g),singleRule:!0}]}},watch:{customRules:{deep:!0,handler(){this.validationError()}}},computed:{hasCustomRules(){return 0<this.customRules.length},filteredTypes(){return this.types.map(e=>({...e,$isDisabled:e.singleRule&&this.customRules.find(t=>e.value===t.type)}))}},methods:{isDisabledStartDate(e){const t=new Date;return t.setHours(0,0,0,0),e<t},isDisabledEndDate(e,t){const a=this.getRuleValue("scheduleStart",t);return a?(e.setHours(23,59,59,0),this.dateStringToLocalJs(a)>e):this.isDisabledStartDate(e)},removeRule(e){this.customRules.splice(e,1),this.hasCustomRules||this.addRule(null)},addRule(e,t=!1){e||(e=JSON.parse(JSON.stringify(ge))),(!t||t&&this.customRules.filter(a=>a===e).length===0)&&this.customRules.push(e)},updateRule(e,t,a){const m=this.customRules[a];t=typeof t.value<"u"?t.value:t,t=typeof t=="object"&&t.length?t.map(s=>s.value):t,m[e]=t,e==="type"&&(m.value=""),this.customRules[a]=m},getRuleValue(e,t,a=!1){if(!this.customRules[t])return;let s=this.customRules[t][e],r=null;if(a)return s;switch(e){case"type":s=this.types.find(d=>s===d.value);break;case"value":r=this.getType(t,"options"),r&&(typeof s=="object"?s=s.map(d=>r.find(T=>d===T.value)||d).filter(d=>!!d):s=r.find(d=>s===d.value)||s),this.getType(t,"taggable")&&(s=typeof s=="object"?s.map(d=>typeof d.label>"u"?{label:d,value:d}:d):[]);break}return s},getType(e,t){const a=this.getRuleValue("type",e);return t?a&&typeof a[t]<"u"?a[t]:!1:a},validationError(){let e=!1,t=null,a=null;this.customRules.forEach((m,s)=>{this.rulesErrors[s]=null,m.type==="schedule"&&(t=this.getRuleValue("scheduleStart",s),a=this.getRuleValue("scheduleEnd",s),t&&a&&(t>a&&(this.rulesErrors[s]=i("The Start Date must be lower than the End Date.",g),e=!0),t===a&&(this.rulesErrors[s]=i("Start Date and End Date must be different.",g),e=!0)))}),this.$emit("redirects-custom-rule-error",e)},updateDate(e,t,a){const m=e!==null?J.fromJSDate(e).toUTC().toString():"";this.updateRule(t,m,a)}},mounted(){this.editCustomRules&&(this.customRules=this.editCustomRules),this.hasCustomRules||this.addRule(null)}},me={class:"custom-rules"},pe={class:"redirects-options-table",cellspacing:"0",cellpadding:"0","aria-label":"Custom Rules"},fe={colspan:"2"},_e={class:"custom-rules__label"},ye={class:"rule-settings"},Re={class:"rule-row"},ve={class:"rule-option"},Ue={key:3,class:"date-range"},be={key:0,class:"rule-error"},Se={class:"actions"},Te={colspan:"2"};function De(e,t,a,m,s,r){const d=p("svg-circle-question-mark"),T=p("core-tooltip"),D=p("base-select"),V=p("base-input"),C=p("base-date-picker"),k=p("base-toggle"),I=p("core-alert"),P=p("svg-trash"),B=p("svg-circle-plus"),H=p("base-button");return u(),R("div",me,[o("table",pe,[o("thead",null,[o("tr",null,[o("td",fe,[o("div",_e,[o("span",null,f(s.strings.customRules),1),h(T,{offset:"200px,0"},{tooltip:_(()=>[b(f(s.strings.customRulesTooltip),1)]),default:_(()=>[h(d)]),_:1})])])])]),o("tbody",null,[(u(!0),R(E,null,q(s.customRules,(M,l)=>(u(),R("tr",{class:N(["rule",{even:l%2===0}]),key:l},[o("td",ye,[o("div",Re,[o("div",ve,[h(D,{options:r.filteredTypes,size:"medium",placeholder:s.strings.selectMatchRule,modelValue:r.getRuleValue("type",l),"onUpdate:modelValue":c=>r.updateRule("type",c,l)},null,8,["options","placeholder","modelValue","onUpdate:modelValue"]),r.getType(l,"options")||r.getType(l,"taggable")?(u(),U(D,{key:`rule-${l}-${r.getRuleValue("type",l)?.value||"no-type"}`,options:r.getType(l,"options")||[],size:"medium",modelValue:r.getRuleValue("value",l),"onUpdate:modelValue":c=>r.updateRule("value",c,l),multiple:r.getType(l,"multiple")||r.getType(l,"taggable"),taggable:r.getType(l,"taggable"),placeholder:r.getType(l,"placeholder")||s.strings.selectAValue},null,8,["options","modelValue","onUpdate:modelValue","multiple","taggable","placeholder"])):v("",!0),r.getType(l,"keyValuePair")?(u(),U(V,{key:1,modelValue:r.getRuleValue("key",l),"onUpdate:modelValue":c=>r.updateRule("key",c,l),size:"medium",placeholder:r.getType(l,"placeholderKey")||s.strings.key},null,8,["modelValue","onUpdate:modelValue","placeholder"])):v("",!0),!r.getType(l,"options")&&!r.getType(l,"taggable")&&!r.getType(l,"dateRange")?(u(),U(V,{key:2,modelValue:r.getRuleValue("value",l),"onUpdate:modelValue":c=>r.updateRule("value",c,l),size:"medium",placeholder:r.getType(l,"placeholder")||s.strings.value,disabled:!r.getType(l)},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):v("",!0),r.getType(l,"dateRange")?(u(),R("div",Ue,[h(C,{type:"datetime",size:"large",placeholder:s.strings.startDate,dateFormat:m.rootStore.aioseo.data.dateFormat+" - "+m.rootStore.aioseo.data.timeFormat,defaultValue:m.dateStringToLocalJs(r.getRuleValue("scheduleStart",l)),onChange:c=>r.updateDate(c,"scheduleStart",l),isDisabledDate:r.isDisabledStartDate},null,8,["placeholder","dateFormat","defaultValue","onChange","isDisabledDate"]),h(C,{type:"datetime",size:"large",placeholder:s.strings.endDate,dateFormat:m.rootStore.aioseo.data.dateFormat+" - "+m.rootStore.aioseo.data.timeFormat,defaultValue:m.dateStringToLocalJs(r.getRuleValue("scheduleEnd",l)),onChange:c=>r.updateDate(c,"scheduleEnd",l),isDisabledDate:c=>r.isDisabledEndDate(c,l)},null,8,["placeholder","dateFormat","defaultValue","onChange","isDisabledDate"])])):v("",!0),r.getType(l,"regex")?(u(),U(k,{key:4,modelValue:r.getRuleValue("regex",l),"onUpdate:modelValue":c=>r.updateRule("regex",c,l)},{default:_(()=>[b(f(s.strings.regex),1)]),_:1},8,["modelValue","onUpdate:modelValue"])):v("",!0)]),s.rulesErrors[l]?(u(),R("div",be,[h(I,{type:"red",size:"small"},{default:_(()=>[b(f(s.rulesErrors[l]),1)]),_:2},1024)])):v("",!0)])]),o("td",Se,[h(T,{class:"action",type:"action"},{tooltip:_(()=>[b(f(s.strings.delete),1)]),default:_(()=>[h(P,{onClick:c=>r.removeRule(l)},null,8,["onClick"])]),_:2},1024)])],2))),128))]),o("tfoot",null,[o("tr",null,[o("td",Te,[h(H,{size:"small-table",type:"black",onClick:t[0]||(t[0]=M=>r.addRule(null))},{default:_(()=>[h(B),b(" "+f(s.strings.add),1)]),_:1})])])])])])}const ke=j(he,[["render",De],["__scopeId","data-v-e545a658"]]),n="all-in-one-seo-pack",we={emits:["cancel","added-redirect"],setup(){const{getJsonValue:e}=$(),{redirectHasUnPublishedPost:t}=se(),{decodeUrl:a}=le();return{getJsonValue:e,redirectHasUnPublishedPost:t,decodeUrl:a,redirectsStore:x()}},components:{BaseButton:O,BaseSelect:F,CoreAddRedirectionTargetUrl:re,CoreAddRedirectionUrl:te,CoreAlert:W,CustomRules:ke,SvgRightArrow:ee,SvgCircleQuestionMark:Y,TransitionSlide:ce,CoreTooltip:Q},props:{edit:Boolean,log404:Boolean,disableSource:Boolean,url:Object,urls:Array,target:String,type:Number,query:String,slash:Boolean,case:Boolean,rules:{type:Array,default(){return[]}},postId:Number,postStatus:String},data(){return{REDIRECT_TYPES:w,genericError:!1,addingRedirect:!1,targetUrlErrors:[],targetUrlWarnings:[],customRulesError:!1,strings:{redirectType:i("Redirect Type",n),targetUrl:i("Target URL",n),targetUrlDescription:i("Enter a URL or start by typing a page or post title, slug or ID.",n),addUrl:i("Add URL",n),sourceUrlDescription:A(i("Enter a relative URL to redirect from or start by typing in page or post title, slug or ID. You can also use regex (%1$s)",n),L.getDocLink(i("what's this?",n),"redirectManagerRegex")),advancedSettings:i("Advanced Settings",n),queryParams:i("Query Parameters",n),queryParamsTooltip:i("Query parameters are the parameters that are passed to the target URL. You can ignore all parameters, ignore exact parameters, or include all parameters.",n),saveChanges:i("Save Changes",n),cancel:i("Cancel",n),genericErrorMessage:i("An error occurred while adding your redirects. Please try again later.",n),sourceUrlSetOncePublished:i("source url set once post is published",n)},sourceDisabled:!1,editing:!1,editingRedirect:{sourceUrls:[],targetUrl:null,redirectType:null,queryParam:null,customRules:[],showAdvancedSettings:!1}}},watch:{sourceUrls:{deep:!0,handler(){X(()=>this.checkForDuplicates(),500)}}},computed:{isUsingAdvancedSettings(){return this.redirectType?.value!==this.getDefaultRedirectType?.value||this.queryParam?.value!==this.getDefaultQueryParam?.value||0<this.customRules.length&&this.customRules.some(e=>0<e.value?.length)},sourceUrls:{get(){return this.editing?this.editingRedirect.sourceUrls:this.redirectsStore.addNewRedirect.sourceUrls},set(e){this.editing?this.editingRedirect.sourceUrls=e:this.redirectsStore.addNewRedirect.sourceUrls=e}},targetUrl:{get(){return this.editing?this.editingRedirect.targetUrl:this.redirectsStore.addNewRedirect.targetUrl},set(e){this.editing?this.editingRedirect.targetUrl=e:this.redirectsStore.addNewRedirect.targetUrl=e}},redirectType:{get(){return this.editing?this.editingRedirect.redirectType:this.redirectsStore.addNewRedirect.redirectType},set(e){this.editing?this.editingRedirect.redirectType=e:this.redirectsStore.addNewRedirect.redirectType=e}},queryParam:{get(){return this.editing?this.editingRedirect.queryParam:this.redirectsStore.addNewRedirect.queryParam},set(e){this.editing?this.editingRedirect.queryParam=e:this.redirectsStore.addNewRedirect.queryParam=e}},customRules:{get(){return this.editing?this.editingRedirect.customRules:this.redirectsStore.addNewRedirect.customRules},set(e){this.editing?this.editingRedirect.customRules=e:this.redirectsStore.addNewRedirect.customRules=e}},showAdvancedSettings:{get(){return this.editing?this.editingRedirect.showAdvancedSettings:this.redirectsStore.addNewRedirect.showAdvancedSettings},set(e){this.editing?this.editingRedirect.showAdvancedSettings=e:this.redirectsStore.addNewRedirect.showAdvancedSettings=e}},saveIsDisabled(){return!!this.sourceUrls.filter(e=>!e.url).length||!!this.sourceUrls.filter(e=>0<e.errors.length).length||this.redirectTypeHasTarget()&&!this.targetUrl||this.customRulesError},getRelativeAbsolute(){const e=this.targetUrl.match(/^\/([a-zA-Z0-9_\-%]*\..*)\//);return e?e[0]:null},sourceUrl(){return 1<this.sourceUrls.length?i("Source URLs",n):i("Source URL",n)},addRedirect(){return 1<this.sourceUrls.length?i("Add Redirects",n):i("Add Redirect",n)},hasTargetUrlErrors(){if(!this.targetUrl)return[];const e=[],t=z(this.targetUrl);if(!t)return e.push(i("Your target URL is not valid.",n)),e;this.targetUrl&&!this.beginsWith(this.targetUrl,"https://")&&!this.beginsWith(this.targetUrl,"http://")&&this.targetUrl.substr(0,1)!=="/"&&e.push(A(i("Your target URL should be an absolute URL like %1$s or start with a slash %2$s.",n),"<code>https://domain.com/"+t+"</code>","<code>/"+t+"</code>"));const a=this.targetUrl.match(/[|\\$]/g);return a!==null&&(this.sourceUrls.map(s=>s.regex).every(s=>s)||e.push(A(i("Your target URL contains the invalid character(s) %1$s",n),"<code>"+a+"</code>"))),e},hasTargetUrlWarnings(){if(!z(this.targetUrl))return[];const e=[];return this.getRelativeAbsolute&&e.push(A(i("Your URL appears to contain a domain inside the path: %1$s. Did you mean to use %2$s instead?",n),"<code>"+this.getRelativeAbsolute+"</code>","<code>https:/"+this.getRelativeAbsolute+"</code>")),e},getDefaultRedirectType(){let e=this.getJsonValue(this.redirectsStore.options.redirectDefaults.redirectType);const t=w.find(a=>parseInt(a.value)===parseInt(e?.value));return e||(e=w[0]),t||e},getDefaultQueryParam(){let e=this.getJsonValue(this.redirectsStore.options.redirectDefaults.queryParam);const t=S.find(a=>a.value===e?.value);return e||(e=S[0]),t||e},getDefaultSlash(){return this.redirectsStore.options.redirectDefaults.ignoreSlash},getDefaultCase(){return this.redirectsStore.options.redirectDefaults.ignoreCase},getDefaultSourceUrls(){return[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))]},getDefaultSourceUrl(){return{id:null,url:null,regex:!1,ignoreSlash:this.slash||this.getDefaultSlash||!1,ignoreCase:this.case||this.getDefaultCase||!1,errors:[],warnings:[]}},redirectQueryParams(){return 0<this.sourceUrls.filter(e=>e.regex).length?S.map(e=>(e.$isDisabled=!1,e.value==="exact"&&(e.$isDisabled=!0,this.queryParam.value==="exact"&&(this.queryParam=S.find(t=>!t.$isDisabled))),e)):S.map(e=>(e.$isDisabled=!1,e))},unPublishedPost(){return this.redirectHasUnPublishedPost({post_id:this.postId,postStatus:this.postStatus})}},methods:{beginsWith(e,t){return t.indexOf(e)===0||e.substr(0,t.length)===t},addUrl(){this.sourceUrls.push(JSON.parse(JSON.stringify(this.getDefaultSourceUrl)))},removeUrl(e){this.sourceUrls.splice(e,1)},addRedirects(){if(this.genericError=!1,this.addingRedirect=!0,Z()){const e=this.urls?.[0]?.url??window.wp.data.select("core/editor").getCurrentPostAttribute("slug");e&&this.sourceUrls.map(t=>(t.url=e.startsWith("/")?e:`/${e}`,t))}this.sourceUrls.map(e=>(e.url.substr(0,4)!=="http"&&e.url.substr(0,1)!=="/"&&0<e.url.length&&!e.regex&&(e.url="/"+e.url),e)),this.redirectsStore.create({sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),group:this.log404?"404":"manual",postId:this.postId}).then(()=>{this.$emit("added-redirect"),window.aioseoBus.$emit("added-redirect"),this.reset()}).catch(e=>{this.handleError(e)})},saveChanges(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls[0].url.substr(0,4)!=="http"&&this.sourceUrls[0].url.substr(0,1)!=="/"&&0<this.sourceUrls[0].url.length&&!this.sourceUrls[0].regex&&(this.sourceUrls[0].url="/"+this.sourceUrls[0].url),this.redirectsStore.update({id:this.sourceUrls[0].id,payload:{sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),postId:this.postId}}).then(()=>{this.$emit("added-redirect"),this.reset()}).catch(e=>{console.error(e),this.handleError(e)})},handleError(e){if(e.response.status!==409||!e.response.body.failed||!e.response.body.failed.length){this.genericError=!0,this.addingRedirect=!1;return}const t=[],a=e.response.body.failed,m=i("A redirect already exists for this source URL. To make changes, edit the original instead.",n);a.forEach(s=>{const r=this.sourceUrls.findIndex(d=>d.url===s.url||s);r!==-1&&(this.sourceUrls[r].errors.find(d=>d===s.error||d===m)||this.sourceUrls[r].errors.push(s.error||m),t.push(r))});for(let s=this.sourceUrls.length-1;0<=s;s--)t.includes(s)||this.sourceUrls.splice(s,1);this.addingRedirect=!1},updateTargetUrl(e){this.targetUrl=e,this.targetUrlErrors=this.hasTargetUrlErrors,this.targetUrlWarnings=this.hasTargetUrlWarnings},reset(){if(this.showAdvancedSettings=!1,this.addingRedirect=!1,this.edit)return;const e=w.find(a=>a.value===this.type)||this.getDefaultRedirectType,t=S.find(a=>a.value===this.query)||this.getDefaultQueryParam;this.sourceUrls=[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))],this.targetUrl=null,this.targetUrlErrors=[],this.targetUrlWarnings=[],this.redirectType=e||{label:"301 "+i("Moved Permanently",n),value:301},this.queryParam=t||{label:i("Ignore all parameters",n),value:"ignore"},this.customRules=[]},checkForDuplicates(){const e=[];this.sourceUrls.forEach((t,a)=>{if(!(!t.url||t.errors.length)){if(e.includes(t.url.replace(/\/$/,""))){this.sourceUrls[a].errors.push(i("This is a duplicate of a URL you are already adding. You can only add unique source URLs.",n));return}e.push(t.url.replace(/\/$/,""))}}),this.updateTargetUrl(this.targetUrl)},redirectTypeHasTarget(){return this.redirectType&&(typeof this.redirectType.noTarget>"u"||!this.redirectType.noTarget)}},mounted(){0<=this.sourceUrls?.length&&(this.sourceUrls=this.getDefaultSourceUrls),this.url&&(this.editing=!0,this.sourceUrls=[{...this.getDefaultSourceUrl,...this.url}]),this.urls&&this.urls.length&&(this.editing=!0,this.sourceUrls=this.urls.map(e=>({...this.getDefaultSourceUrl,...e}))),this.sourceDisabled=this.disableSource,this.unPublishedPost&&(this.sourceUrls=this.sourceUrls.map(e=>(e.url="("+this.strings.sourceUrlSetOncePublished+")",e)),this.sourceDisabled=!0),this.target&&(this.targetUrl=this.target),this.rules&&this.rules.length!==0&&(this.customRules=this.rules),this.redirectType=w.find(e=>e.value===this.type)||this.redirectType||this.getDefaultRedirectType,this.queryParam=S.find(e=>e.value===this.query)||this.queryParam||this.getDefaultQueryParam,this.editingRedirect.showAdvancedSettings=this.isUsingAdvancedSettings}},Ee={class:"urls"},Ve={class:"source"},Ce={class:"aioseo-settings-row no-border no-margin small-padding"},Pe={class:"settings-name"},Ae={class:"name small-margin"},Le=["innerHTML"],qe={key:0,class:"url-arrow"},Ne={key:1,class:"target"},Ie={class:"aioseo-settings-row no-border no-margin small-padding"},Be={class:"settings-name"},He={class:"name small-margin"},Me={class:"url"},ze={class:"aioseo-description"},Je={class:"source"},Oe=["innerHTML"],Fe={key:1,class:"aioseo-add-redirection__separator"},We={key:2,class:"settings advanced"},Qe={class:"all-settings"},Ye={class:"all-aioseo-settings-content"},je={class:"redirect-type"},Ke={class:"redirect-type__label"},Ge={class:"query-params"},Ze={class:"query-params__label"};function Xe(e,t,a,m,s,r){const d=p("core-alert"),T=p("core-add-redirection-url"),D=p("base-button"),V=p("svg-right-arrow"),C=p("core-add-redirection-target-url"),k=p("transition-slide"),I=p("base-toggle"),P=p("base-select"),B=p("svg-circle-question-mark"),H=p("core-tooltip"),M=p("custom-rules");return u(),R("div",{class:N(["aioseo-add-redirection",{"edit-url":a.edit,"log-404":a.log404}])},[s.genericError?(u(),U(d,{key:0,class:"generic-error",type:"red"},{default:_(()=>[b(f(s.strings.genericErrorMessage),1)]),_:1})):v("",!0),o("div",Ee,[o("div",Ve,[o("div",Ce,[o("div",Pe,[o("div",Ae,f(r.sourceUrl),1)]),(u(!0),R(E,null,q(r.sourceUrls,(l,c)=>(u(),U(T,{key:c,url:l,"allow-delete":1<r.sourceUrls.length,onRemoveUrl:xe=>r.removeUrl(c),"target-url":r.targetUrl,log404:a.log404,disableSource:s.sourceDisabled},ne({_:2},[a.edit&&!s.sourceDisabled?{name:"source-url-description",fn:_(()=>[o("div",{class:"aioseo-description source-description",innerHTML:s.strings.sourceUrlDescription},null,8,Le)]),key:"0"}:void 0]),1032,["url","allow-delete","onRemoveUrl","target-url","log404","disableSource"]))),128)),!a.edit&&!a.log404&&!s.sourceDisabled?(u(),U(D,{key:0,size:"small",type:"gray",onClick:r.addUrl},{default:_(()=>[b(f(s.strings.addUrl),1)]),_:1},8,["onClick"])):v("",!0)])]),r.redirectTypeHasTarget()?(u(),R("div",qe,[h(V)])):v("",!0),r.redirectTypeHasTarget()?(u(),R("div",Ne,[o("div",Ie,[o("div",Be,[o("div",He,f(s.strings.targetUrl),1)]),o("div",Me,[h(C,{url:m.decodeUrl(r.targetUrl),errors:s.targetUrlErrors,warnings:s.targetUrlWarnings,"onUpdate:modelValue":r.updateTargetUrl},null,8,["url","errors","warnings","onUpdate:modelValue"]),o("div",ze,f(s.strings.targetUrlDescription),1),h(k,{active:!!s.targetUrlErrors.length},{default:_(()=>[o("div",null,[(u(!0),R(E,null,q(s.targetUrlErrors,(l,c)=>(u(),U(d,{key:c,class:"target-url-error",type:"red",size:"small",innerHTML:l},null,8,["innerHTML"]))),128))])]),_:1},8,["active"]),h(k,{active:!!s.targetUrlWarnings.length},{default:_(()=>[o("div",null,[(u(!0),R(E,null,q(s.targetUrlWarnings,(l,c)=>(u(),U(d,{key:c,class:"target-url-warning",type:"yellow",size:"small",innerHTML:l},null,8,["innerHTML"]))),128))])]),_:1},8,["active"])])])])):v("",!0),!a.edit&&!a.log404&&!s.sourceDisabled?(u(),R(E,{key:2},[t[7]||(t[7]=o("div",{class:"break"},null,-1)),o("div",Je,[o("div",{class:"aioseo-description source-description",innerHTML:s.strings.sourceUrlDescription},null,8,Oe)]),t[8]||(t[8]=o("div",{class:"url-arrow"},null,-1)),t[9]||(t[9]=o("div",{class:"target"},null,-1))],64)):v("",!0)]),t[10]||(t[10]=o("hr",{class:"aioseo-add-redirection__separator"},null,-1)),o("div",{class:N(["aioseo-add-redirection__settings",{advanced:r.showAdvancedSettings}])},[h(I,{modelValue:r.showAdvancedSettings,"onUpdate:modelValue":t[0]||(t[0]=l=>r.showAdvancedSettings=!r.showAdvancedSettings)},null,8,["modelValue"]),o("span",null,f(s.strings.advancedSettings),1)],2),r.showAdvancedSettings?v("",!0):(u(),R("hr",Fe)),r.showAdvancedSettings?(u(),R("div",We,[o("div",Qe,[o("div",Ye,[o("div",je,[o("span",Ke,f(s.strings.redirectType),1),h(P,{options:s.REDIRECT_TYPES,modelValue:r.redirectType,"onUpdate:modelValue":t[1]||(t[1]=l=>r.redirectType=l),size:"medium"},null,8,["options","modelValue"])]),h(k,{class:"advanced-settings",active:r.showAdvancedSettings},{default:_(()=>[o("div",Ge,[o("div",Ze,[o("span",null,f(s.strings.queryParams),1),h(H,null,{tooltip:_(()=>[b(f(s.strings.queryParamsTooltip),1)]),default:_(()=>[h(B)]),_:1})]),h(P,{options:r.redirectQueryParams,modelValue:r.queryParam,"onUpdate:modelValue":t[2]||(t[2]=l=>r.queryParam=l),size:"medium"},null,8,["options","modelValue"])])]),_:1},8,["active"]),r.showAdvancedSettings?v("",!0):(u(),R("a",{key:0,class:"advanced-settings-link",href:"#",onClick:t[3]||(t[3]=de(l=>r.showAdvancedSettings=!r.showAdvancedSettings,["prevent"]))},f(s.strings.advancedSettings),1))])]),h(k,{class:"advanced-settings",active:r.showAdvancedSettings},{default:_(()=>[(u(),U(M,{key:r.customRules,"edit-custom-rules":r.customRules,onRedirectsCustomRuleError:t[4]||(t[4]=l=>s.customRulesError=l)},null,8,["edit-custom-rules"]))]),_:1},8,["active"])])):v("",!0),o("div",{class:N(["aioseo-add-redirection__actions",{advanced:r.showAdvancedSettings}])},[h(D,{size:"medium",type:"blue",onClick:t[5]||(t[5]=l=>a.edit?r.saveChanges():r.addRedirects()),loading:s.addingRedirect,disabled:r.saveIsDisabled},{default:_(()=>[b(f(a.edit?s.strings.saveChanges:r.addRedirect),1)]),_:1},8,["loading","disabled"]),a.edit?(u(),U(D,{key:0,size:"medium",type:"gray",onClick:t[6]||(t[6]=l=>e.$emit("cancel",!0)),class:"cancel-edit-row"},{default:_(()=>[b(f(s.strings.cancel),1)]),_:1})):v("",!0)],2)],2)}const ft=j(we,[["render",Xe]]);export{ft as C};
