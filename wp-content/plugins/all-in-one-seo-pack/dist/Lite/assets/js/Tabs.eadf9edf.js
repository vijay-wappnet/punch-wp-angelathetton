import{aB as O,aC as R,au as $,as as h,f as i,i as r,j as d,a0 as m,R as p,O as w,ad as k,Q as x,B as g,U as b,M as c,P as C,ae as S,T as B,S as V,g as q}from"./vendor-vue-ui.d70c869f.js";import{b as E,x as z,u as P}from"./app-core.61d75c0b.js";import{_ as I}from"./Button.7fa2ada4.js";import{C as U}from"./ProBadge.3cd57c7c.js";import{S as X}from"./Caret.c4a084e6.js";import{S as D}from"./Information.c3ceadd3.js";import{T as H}from"./Slide.4a56936c.js";import{_ as j}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as y}from"./vendor-other.2cdd5822.js";const F=()=>({processSaveChanges:e=>{window.aioseoBus.$emit("saving-changes");const t=E();t.loading=!0;let l=!1,o=!1,n="saveChanges";setTimeout(()=>{l=!0,o&&(t.loading=!1)},1500);const u=z();e==="htaccess-editor"&&(n="saveHtaccess",u.htaccessError=null),t.aioseo.data.isNetworkAdmin&&e==="robots-editor"&&(n="saveNetworkRobots"),u[n]().then(f=>{f&&f.body.redirection||(l||e==="htaccess-editor"?t.loading=!1:o=!0,window.aioseoBus.$emit("changes-saved"))})}}),M="all-in-one-seo-pack",G={emits:["changed"],setup(){const s=q();let e={name:""};s?.root?.data?.screenContext||(e=$());const{processSaveChanges:t}=F();return{postEditorStore:P(),processSaveChanges:t,rootStore:E(),route:e}},components:{BaseButton:I,CoreProBadge:U,SvgCaret:X,SvgCircleInformation:D,TransitionSlide:H,VarTab:R,VarTabs:O},props:{tabs:{type:Array,required:!0},skinnyTabs:Boolean,active:String,showSaveButton:{type:Boolean,default(){return!0}},internal:Boolean,disableMobile:Boolean,disableTabs:Boolean},data(){return{buttonLoading:!1,showMobileMenu:!1,showMobileTabs:!1,strings:{saveChanges:y("Save Changes",M),new:y("NEW!",M),beta:y("BETA!",M),comingSoon:y("COMING SOON!",M)}}},watch:{activeTab(){this.$nextTick(()=>this.maybeShowMobileMenu())}},computed:{activeTab(){return this.active?this.active:this.route&&this.route.name?this.route.name:this.tabs[0]?.slug},filteredTabs(){return this.tabs.filter(s=>s.slug!==(this.active?this.active:this.route&&this.route.name?this.route.name:""))}},methods:{clickMobileTabs(s){this.$emit("changed",s),this.showMobileTabs=!1},maybeChangeTab(s){if(this.disableTabs)return;if(this.active){this.$emit("changed",s);return}const e=this.tabs.find(t=>t.slug===s);e&&this.$router.push(e.url)},getActiveTabName(){const s=this.tabs.find(e=>e.slug===(this.active?this.active:this.route&&this.route.name?this.route.name:""));return s?s.name:""},maybeShowMobileMenu(){if(this.disableMobile)return;if(window.matchMedia("(max-width: 782px)").matches){this.showMobileMenu=!0;return}const s=this.$refs["aioseo-tabs"],e=this.$refs["tabs-scroller"];if(!s||!e)return;const t=e.scrollWidth;let l=0,o=0;const n=this.$refs["tabs-button"];if(n){const _=n.querySelector(".aioseo-button");l=_?_.offsetWidth:0}const u=this.$refs["tabs-extra"];u&&(o=u.offsetWidth);const f=t+l+o,T=s.offsetWidth;this.showMobileMenu=f>T},createRipple(s){const e=s.currentTarget,t=document.createElement("span"),l=Math.max(e.clientWidth,e.clientHeight),o=l/2,n=e.getBoundingClientRect();t.style.width=t.style.height=`${l}px`,t.style.left=`${s.clientX-(n.left+o)}px`,t.style.top=`${s.clientY-(n.top+o)}px`,t.classList.add("ripple");const u=e.getElementsByClassName("ripple")[0];u&&u.remove(),e.appendChild(t)}},beforeMount(){window.addEventListener("resize",this.maybeShowMobileMenu)},async mounted(){this.$nextTick(()=>{this.maybeShowMobileMenu();const s=this.$refs["aioseo-tabs"],e=s.querySelector(".var-tab--active"),t=s.querySelector(".var-tabs__indicator");if(!e||!t)return;setTimeout(()=>{t.style.width==="0px"&&(t.style.width=`${e.offsetWidth}px`,t.style.transform=`translateX(${e.offsetLeft}px)`)},300),new MutationObserver(()=>{t.style.width==="0px"&&(t.style.width=`${e.offsetWidth}px`,t.style.transform=`translateX(${e.offsetLeft}px)`)}).observe(t,{attributes:!0});const o=s.querySelectorAll(".var-tab");o.length&&o.forEach(n=>{n.addEventListener("click",this.createRipple)})})},beforeUnmount(){window.removeEventListener("resize",this.maybeShowMobileMenu)}},Q={class:"tab-label"},Y={key:0,class:"warning"},J={key:0,class:"label pro-badge"},K={key:1,class:"label new"},Z={key:2,class:"label beta"},ee={key:3,class:"label coming-soon"},te={key:0,class:"aioseo-mobile-tabs"},se={class:"tab-links"},oe={key:0,class:"new"},ae=["onClick"],ne={key:1,class:"button-right",ref:"tabs-button"},ie={class:"tabs-extra",ref:"tabs-extra"};function re(s,e,t,l,o,n){const u=h("svg-circle-information"),f=h("core-pro-badge"),T=h("var-tab"),_=h("var-tabs"),W=h("svg-caret"),N=h("transition-slide"),L=h("base-button");return i(),r("div",{class:C(["aioseo-tabs",{internal:t.internal,skinny:t.skinnyTabs}]),ref:"aioseo-tabs"},[d("div",{class:C(["tabs-scroller",{"visually-hidden":o.showMobileMenu}]),ref:"tabs-scroller"},[m(_,{active:n.activeTab,onClick:n.maybeChangeTab,ref:"var-tabs"},{default:p(()=>[(i(!0),r(w,null,k(t.tabs,(a,v)=>(i(),x(T,{name:a.slug,key:v},{default:p(()=>[g(s.$slots,"var-tab",{tab:a},()=>[g(s.$slots,"var-tab-icon",{tab:a}),d("span",Q,b(a.name),1),g(s.$slots,"after-label",{tab:a}),a.warning&&s.$root.$data.screenContext!=="sidebar"?(i(),r("span",Y,[m(u,{width:"15",height:"15"})])):c("",!0),a.label?(i(),r(w,{key:1},[a.label==="pro"?(i(),r("span",J,[m(f)])):c("",!0),a.label==="new"?(i(),r("span",K,b(o.strings.new),1)):c("",!0),a.label==="beta"?(i(),r("span",Z,b(o.strings.beta),1)):c("",!0),a.label==="coming-soon"?(i(),r("span",ee,b(o.strings.comingSoon),1)):c("",!0)],64)):c("",!0)])]),_:2},1032,["name"]))),128))]),_:3},8,["active","onClick"])],2),o.showMobileMenu?(i(),r("div",te,[d("div",{class:"active-tab",onClick:e[1]||(e[1]=a=>o.showMobileTabs=!o.showMobileTabs)},[d("div",null,[S(b(n.getActiveTabName())+" ",1),m(W,{onClick:e[0]||(e[0]=B(a=>o.showMobileTabs=!o.showMobileTabs,["stop"])),class:C({rotated:!o.showMobileTabs})},null,8,["class"]),e[4]||(e[4]=d("span",{class:"tab-indicator"},null,-1))])]),m(N,{active:o.showMobileTabs,class:"tab-dropdown"},{default:p(()=>[d("div",se,[t.active?c("",!0):(i(!0),r(w,{key:0},k(n.filteredTabs,(a,v)=>(i(),x(V(t.active?"a":"router-link"),{key:v,to:a.url,onClick:e[2]||(e[2]=A=>o.showMobileTabs=!1)},{default:p(()=>[S(b(a.name)+" ",1),a.label==="new"?(i(),r("span",oe,b(o.strings.new),1)):c("",!0)]),_:2},1032,["to"]))),128)),t.active?(i(!0),r(w,{key:1},k(n.filteredTabs,(a,v)=>(i(),r("a",{href:"#",key:v,onClick:B(A=>n.clickMobileTabs(a.slug),["prevent"])},b(a.name),9,ae))),128)):c("",!0)])]),_:1},8,["active"])])):c("",!0),t.showSaveButton?(i(),r("div",ne,[g(s.$slots,"button",{},()=>[m(L,{type:"blue",size:"medium",loading:l.rootStore.loading,onClick:e[3]||(e[3]=a=>l.processSaveChanges(l.route.name))},{default:p(()=>[S(b(o.strings.saveChanges),1)]),_:1},8,["loading"])])],512)):c("",!0),d("div",ie,[g(s.$slots,"extra")],512)],2)}const pe=j(G,[["render",re]]);export{pe as C,F as u};
