import{aM as N,h as E,e as v,b as M,x as w,g as B}from"./app-core.61d75c0b.js";import{u as A}from"./GoogleSearchConsole.9f9028b6.js";import{_ as x}from"./Actionable.bb224d2f.js";import{_ as P}from"./_plugin-vue_export-helper.eefbdd86.js";import{m as T}from"./vendor-lodash.f9514987.js";import{_ as r,a as U}from"./vendor-other.2cdd5822.js";import{as as p,f as i,Q as f,R as y,j as g,i as h,a0 as d,T as I,U as u,O as k,ae as C,M as S}from"./vendor-vue-ui.d70c869f.js";import{u as O}from"./WpTable.90f63b18.js";import{C as z}from"./Index.67f2fc23.js";import{C as D}from"./Table.ce454218.js";import{a as R}from"./Pencil.acabfd26.js";const a="all-in-one-seo-pack",F={setup(){const{strings:o}=A(),e="sitemapErrorsTable",{pageNumber:l,processPagination:t,resultsPerPage:s}=O({changeItemsPerPageSlug:"searchConsoleSitemapErrors",fetchData:()=>Promise.resolve(),resultsPerPage:5,tableId:e});return{composableStrings:o,optionsStore:w(),pageNumber:l,processPagination:t,resultsPerPage:s,rootStore:M(),searchStatisticsStore:v(),settingsStore:E(),tableId:e}},components:{CoreAlertActionable:x,CoreModal:z,CoreWpTable:D,SvgCircleCheck:R},props:{display:{type:Boolean,default:!1},sitemaps:{type:Array,default:()=>[]}},data(){return{loading:!1,bulkOptions:[{label:r("Remove",a),value:"remove"},{label:r("Ignore",a),value:"ignore"}],strings:T(this.composableStrings,{aioseoHasFoundSomeErrorsInSitemaps:U(r("%1$s has found some errors in sitemaps that were previously submitted to Google Search Console. Since %1$s manages your sitemaps, these additional sitemaps can be removed.",a),"AIOSEO"),allErrorsResolved:r("All errors have been resolved",a),removeSitemap:r("Remove",a),ignoreSitemap:r("Ignore",a),viewDetails:r("Details",a),sitemapErrors:r("Sitemap Errors",a),thereAreSitemapsWithErrors:r("There are sitemaps with errors",a)})}},computed:{totals(){return{page:1,pages:Math.ceil(this.searchStatisticsStore.sitemapsWithErrors.length/this.resultsPerPage),total:this.searchStatisticsStore.sitemapsWithErrors.length}},rows(){const o=this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage;return this.searchStatisticsStore.sitemapsWithErrors.slice(o,o+this.resultsPerPage)},columns(){return[{slug:"sitemap",label:r("Sitemap",a)},{slug:"actions",label:r("Actions",a),width:"220px"}]}},methods:{escUrl:N,fetchData(){return Promise.resolve()},processBulkAction({action:o,selectedRows:e}){if(!e.length)return;const l=[];switch(Array.isArray(e)?e.forEach(t=>{l.push(this.rows[t].path)}):l.push(e.path),o){case"remove":this.loading=!0,this.searchStatisticsStore.deleteSitemap({sitemap:l}).finally(()=>{this.loading=!1});break;case"ignore":this.loading=!0,this.searchStatisticsStore.ignoreSitemap({sitemap:l}).finally(()=>{this.loading=!1});break}},deleteSitemap(o){this.loading=!0,this.searchStatisticsStore.deleteSitemap({sitemap:o}).finally(()=>{this.loading=!1})},ignoreSitemap(o){this.loading=!0,this.searchStatisticsStore.ignoreSitemap({sitemap:o}).finally(()=>{this.loading=!1})},canRemoveSitemap(o){return!this.rootStore.aioseo.data.sitemapUrls.includes(o.path)}}},V={class:"aioseo-modal-body"},H={key:0},L=["href"],Y=["onClick"],j=["href"],Q=["onClick"],q={key:1,class:"no-errors"};function J(o,e,l,t,s,n){const m=p("core-alert-actionable"),_=p("core-wp-table"),b=p("svg-circle-check"),G=p("core-modal");return i(),f(G,{show:l.display,onClose:e[0]||(e[0]=c=>o.$emit("close")),classes:["aioseo-sitemaps-errors-modal"]},{headerTitle:y(()=>[C(u(s.strings.sitemapErrors),1)]),body:y(()=>[g("div",V,[t.searchStatisticsStore.sitemapsWithErrors.length>0?(i(),h("div",H,[d(m,{title:s.strings.thereAreSitemapsWithErrors,text:s.strings.aioseoHasFoundSomeErrorsInSitemaps,type:"yellow",size:"small"},null,8,["title","text"]),d(_,{id:t.tableId,columns:n.columns,rows:n.rows,"bulk-options":s.bulkOptions,totals:n.totals,showSearch:!1,loading:s.loading,onPaginate:t.processPagination,onProcessBulkAction:n.processBulkAction},{sitemap:y(({row:c})=>[g("a",{href:n.escUrl(c.path),target:"_blank",rel:"noopener"},u(c.path),9,L)]),actions:y(({row:c})=>[g("a",{href:"#",onClick:I(()=>n.ignoreSitemap(c.path),["prevent"])},u(s.strings.ignoreSitemap),9,Y),c.detailsUrl!==""?(i(),h(k,{key:0},[e[1]||(e[1]=C(" | ",-1)),g("a",{href:n.escUrl(c.detailsUrl),target:"_blank",rel:"noopener"},u(s.strings.viewDetails),9,j)],64)):S("",!0),n.canRemoveSitemap(c)?(i(),h(k,{key:1},[e[2]||(e[2]=C(" | ",-1)),g("a",{href:"#",class:"aioseo-sitemaps-errors-remove",onClick:I(()=>n.deleteSitemap(c.path),["prevent"])},u(s.strings.removeSitemap),9,Q)],64)):S("",!0)]),_:1},8,["id","columns","rows","bulk-options","totals","loading","onPaginate","onProcessBulkAction"])])):(i(),h("div",q,[d(b),g("p",null,u(s.strings.allErrorsResolved),1)]))])]),_:1},8,["show"])}const W=P(F,[["render",J]]),K="all-in-one-seo-pack",X={setup(){const{strings:o,redirectToGscSettings:e}=A();return{searchStatisticsStore:v(),settingsStore:E(),optionsStore:w(),composableStrings:o,redirectToGscSettings:e}},components:{CoreAlertActionable:x,SitemapsWithErrorsModal:W},data(){return{showErrorsModal:!1,strings:T(this.composableStrings,{yourSiteIsConnected:r("Your site is connected directly to Google Search Console and your sitemaps are in sync.",K)})}},mounted(){this.showErrorsModal=!!B()["open-modal"]}},Z={class:"google-search-console-alerts"},$={key:1};function ee(o,e,l,t,s,n){const m=p("core-alert-actionable"),_=p("sitemaps-with-errors-modal");return i(),h("div",Z,[!t.searchStatisticsStore.isConnected&&!t.settingsStore.settings.dismissedAlerts?.searchConsoleNotConnected?(i(),f(m,{key:0,title:s.strings.connectToGoogleToAddSitemaps,text:s.strings.aioseoCanNowVerify,button:s.strings.connectToGoogleSearchConsole,buttonType:"link",type:"yellow",size:"small","show-close":"",onClick:t.redirectToGscSettings,onCloseAlert:e[0]||(e[0]=()=>t.settingsStore.dismissAlert("searchConsoleNotConnected"))},null,8,["title","text","button","onClick"])):S("",!0),t.searchStatisticsStore.isConnected&&!t.settingsStore.settings.dismissedAlerts?.searchConsoleSitemapErrors?(i(),h("div",$,[t.searchStatisticsStore.sitemapsWithErrors.length>0?(i(),f(m,{key:0,title:s.strings.thereAreSitemapsWithErrors,text:s.strings.aioseoHasFoundSomeErrorsInSitemaps,button:s.strings.fixSitemapErrors,buttonType:"link",type:"yellow",size:"small","show-close":"",onCloseAlert:e[1]||(e[1]=()=>t.settingsStore.dismissAlert("searchConsoleSitemapErrors")),onClick:e[2]||(e[2]=()=>s.showErrorsModal=!0)},null,8,["title","text","button"])):S("",!0),d(_,{display:s.showErrorsModal,onClose:e[3]||(e[3]=b=>s.showErrorsModal=!1)},null,8,["display"])])):S("",!0)])}const de=P(X,[["render",ee]]),se="all-in-one-seo-pack",te={setup(){const{strings:o,redirectToGscSettings:e}=A();return{optionsStore:w(),searchStatisticsStore:v(),settingsStore:E(),rootStore:M(),composableStrings:o,redirectToGscSettings:e}},components:{CoreAlertActionable:x,SitemapsWithErrorsModal:W},data(){return{showErrorsModal:!1,strings:T(this.composableStrings,{yourSiteIsConnected:r("Your site is connected directly to Google Search Console and your sitemaps are in sync.",se)})}},computed:{showIsConnected(){return this.searchStatisticsStore.isConnected&&this.optionsStore.internalOptions.internal.searchStatistics.site.verified}}},oe={class:"google-search-console-alerts-inline"};function re(o,e,l,t,s,n){const m=p("core-alert-actionable"),_=p("sitemaps-with-errors-modal");return i(),h("div",oe,[n.showIsConnected?(i(),h(k,{key:0},[d(m,{text:s.strings.yourSiteIsConnected,type:"green",size:"small"},null,8,["text"]),t.searchStatisticsStore.sitemapsWithErrors.length>0&&t.settingsStore.settings.dismissedAlerts?.searchConsoleSitemapErrors?(i(),f(m,{key:0,text:s.strings.aioseoHasFoundSomeErrorsInSitemaps,button:s.strings.fixSitemapErrors,buttonType:"link",type:"yellow",size:"small",onClick:e[0]||(e[0]=()=>s.showErrorsModal=!0)},null,8,["text","button"])):S("",!0),d(_,{display:s.showErrorsModal,onClose:e[1]||(e[1]=b=>s.showErrorsModal=!1),sitemaps:t.searchStatisticsStore.sitemapsWithErrors},null,8,["display","sitemaps"])],64)):t.settingsStore.settings.dismissedAlerts?.searchConsoleNotConnected?(i(),f(m,{key:1,text:s.strings.connectToGoogleToAddSitemaps,button:s.strings.connectToGoogleSearchConsole,buttonType:"link",type:"yellow",size:"small",onClick:t.redirectToGscSettings},null,8,["text","button","onClick"])):S("",!0)])}const _e=P(te,[["render",re]]);export{_e as S,de as a};
