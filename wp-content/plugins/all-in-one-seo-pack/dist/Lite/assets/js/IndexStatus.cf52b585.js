import{aV as se,e as W,h as Se,k as ye,d as X}from"./app-core.61d75c0b.js";import{C as Y}from"./Card.357796d1.js";import{C as we}from"./DonutChartWithLegend.e75d399f.js";import{C as ae}from"./Button.7fa2ada4.js";import{o as xe,w as ke,as as Ce,f as a,Q as u,R as d,a0 as _,P as oe,v as e,i as r,M as x,ae as p,U as o,O as F,ad as U,S,j as t,T as J,r as $,u as G,n as Te}from"./vendor-vue-ui.d70c869f.js";import{u as Re}from"./IndexStatus.e7014280.js";import{u as Ie}from"./PostTypes.2071ae95.js";import{u as Le}from"./WpTable.90f63b18.js";import{C as N}from"./Tooltip.7f0ce0d2.js";import{C as Pe}from"./Table.ce454218.js";import{S as Fe}from"./Caret.c4a084e6.js";import{a as Ae}from"./Pencil.acabfd26.js";import{S as E}from"./Trash.effd183e.js";import{S as Z}from"./Link.526e0dc9.js";import{S as D}from"./External.64f546f0.js";import{l as Oe}from"./vendor-lodash.f9514987.js";import{_ as f}from"./vendor-other.2cdd5822.js";import{m as Ve}from"./Input.74b8f197.js";import{_ as He}from"./_plugin-vue_export-helper.eefbdd86.js";import{C as Ue}from"./Blur.d9f10327.js";import{C as $e}from"./Index.234cfb98.js";import{R as je}from"./RequiredPlans.89eae445.js";import{u as Ge}from"./Cta.bb7712a9.js";import{u as Be}from"./License.dea484a3.js";import"./vendor-datetime.430013a3.js";import"./Close.cee3494e.js";import"./Slide.4a56936c.js";import"./DonutChart.4dd7eab2.js";import"./AnimatedNumber.4be1f885.js";import"./Loading.feb676f0.js";import"./Calendar.8b1730e3.js";import"./Exclamation.07875f57.js";import"./Mobile.df1bda21.js";import"./ScrollTo.f4df02aa.js";import"./Index.104764b8.js";import"./Download.84de9e91.js";import"./Row.0a3f58c3.js";const Me={class:"post-title"},Ne=["onClick"],Ee={key:0,class:"row-actions"},De={class:"edit"},We=["href"],qe=["href"],ze=["onClick"],Qe={class:"inner-row"},Ke={class:"inner-row__heading"},Xe={class:"inner-table inner-table--index-status"},Ye={key:0},Je={colspan:"4"},Ze={key:0},et={key:1},tt=["href"],st={scope:"col"},at={class:"inner-table__col inner-table__col--items-start"},ot={scope:"col"},lt={class:"inner-table__col inner-table__col--items-start"},it={scope:"col"},nt={class:"inner-table__col inner-table__col--items-start"},rt=["innerHTML"],ct={scope:"col"},dt={class:"inner-table__col inner-table__col--items-start"},ut={scope:"col"},ht={class:"inner-table__col inner-table__col--items-start"},pt=["innerHTML"],_t={scope:"col"},gt={class:"inner-table__col inner-table__col--items-start"},mt=["innerHTML"],bt={scope:"col"},ft={class:"inner-table__col inner-table__col--items-start"},vt=["innerHTML"],St={scope:"col"},yt={class:"inner-table__col inner-table__col--items-start"},wt=["innerHTML"],xt={key:0},kt={colspan:"4"},Ct=["href"],Tt={class:"inner-row__heading"},Rt={class:"inner-table"},It={class:"inner-table__col"},Lt=["href"],Pt={key:1},Ft={class:"inner-row__heading"},At={class:"inner-table"},Ot={class:"inner-table__col"},Vt=["href"],Ht={key:1},Ut={class:"inner-row__heading"},$t={class:"inner-table inner-table--rich-results"},jt={scope:"col"},Gt={class:"inner-table__col inner-table__col--items-start"},Bt={class:"rich-result-type__label"},Mt={colspan:"2"},Nt={key:0,class:"rich-result-type-item-issues"},Et={key:1},Dt={class:"inner-table__col"},Wt={key:1},qt={key:2},zt={colspan:"3"},Qt=["href"],Kt=["title"],Xt=["title"],Yt=["title"],Jt=["title"],Zt=["title"],es={key:0,class:"loader-overlay-table"},ee="searchStatisticsIndexStatus",te="index-status-objects-table",ts={__name:"ObjectsTable",props:{paginatedRows:Object,selectedStatus:String,showTableFooter:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},setup(k){const i="all-in-one-seo-pack",h=se(),v=W(),A=Se(),g={richResults:f("Rich Results",i),richResultTypes:f("Rich Result Types",i),richResultTypesHelp:f("Results of the Google Rich Results Test. These are the different schema graphs that are added to the post. Empty if no rich results were found.",i),indexStatusResult:f("Index Status Result",i),sitemaps:f("Sitemaps",i),sitemapsHelp:f("Any sitemaps that this URL was listed in, as known by Google. Not guaranteed to be an exhaustive list, especially if Google did not discover this URL through a sitemap. Empty if no entries in sitemaps were found.",i),referringPages:f("Referring URLs",i),referringPagesHelp:f("URLs that link to the inspected URL, directly and indirectly.",i),issues:f("Issues",i),noIssues:f("No issues",i),notAvailable:f("N/A",i),refreshStatus:f("Refresh Status",i)},L=k,P=$(new Set),y=$(new Set),C=$(null),{items:l,parseRichResults:O,strings:c}=Re(),{editPost:R,viewPost:j}=Ie(),{orderBy:T,orderDir:V,processAdditionalFilters:B,processChangeItemsPerPage:ie,processFilterTable:ne,processPagination:re,processSearch:ce,processSort:de,searchTerm:ue,selectedFilters:q,wpTableKey:he,wpTableLoading:z}=Le({changeItemsPerPageSlug:ee,fetchData:h.fetchIndexStatusObjects,tableId:te,tableRef:C.value,selectedFilters:{}}),pe=G(()=>L.selectedStatus?{...q.value,status:L.selectedStatus}:q.value),_e=G(()=>L.paginatedRows.totals.page),ge=G(()=>[{slug:"title",label:f("Title",i),sortable:1<L.paginatedRows.totals.total,sortDir:T.value==="title"?V.value:"asc",sorted:T.value==="title"},{slug:"verdict",label:l.verdict.title,width:"110px"},{slug:"robotsTxt",label:l.robotsTxtState.title,width:"110px"},{slug:"pageFetch",label:l.pageFetchState.title,width:"110px"},{slug:"crawledAs",label:l.crawledAs.title,width:"120px"},{slug:"richResults",label:g.richResults,width:"135px"},{slug:"lastCrawlTime",label:l.lastCrawlTime.title,sortable:1<L.paginatedRows.totals.total,sortDir:T.value==="lastCrawlTime"?V.value:"asc",sorted:T.value==="lastCrawlTime",width:"120px"},{slug:"buttons",label:"",width:"60px"}]),Q=async(b,n,w)=>{w(b)},M=(b,n)=>{const w=l[n].parseValue(b[n]);let s=w?.description;return n==="verdict"&&b.coverageState&&(s=b.coverageState),s?`${w.value} <div class="inner-row__desc">${s}</div>`:`${w.value}`},me=async b=>{C.value.activeRow=null,P.value.add(b.id);try{await v.getInspectionResult({paths:b.path,force:!0})}catch(n){console.error(n)}finally{P.value.delete(b.id);try{P.value.size||await Promise.all([h.fetchIndexStatusOverview(),h.fetchIndexStatusObjects()])}catch(n){console.error(n)}}},be=Oe(async b=>{b.forEach(n=>y.value.add(n.id));try{const n=b.map(w=>(P.value.add(w.id),w.path));await v.getInspectionResult({paths:n})}catch(n){console.error(n)}finally{b.forEach(n=>{P.value.delete(n.id)});try{await Promise.all([h.fetchIndexStatusOverview(),h.fetchIndexStatusObjects()])}catch(n){console.error(n)}}},2e3);return xe(async()=>{if(v.isConnected&&!v.shouldShowSampleReports&&!h.objects.paginated.rows.length)try{await Promise.all([h.fetchIndexStatusOverview(),h.fetchIndexStatusObjects()])}catch(b){console.error(b)}}),ke(()=>L.paginatedRows.rows,b=>{const n=b.filter(w=>!w.isInspectionValid&&!y.value.has(w.id));n.length&&be(n)}),(b,n)=>{const w=Ce("base-button");return a(),u(e(Pe),{ref_key:"table",ref:C,id:te,"additional-filters":Object.values(e(h).options?.table?.additionalFilters||{}),"selected-filters":pe.value,"bulk-options":[],columns:ge.value,filters:[],"initial-items-per-page":e(A).settings.tablePagination[ee],"initial-page-number":_e.value,"initial-search-term":k.paginatedRows?.searchTerm||e(ue),key:e(he),loading:e(z)||e(h).objects.fetching,rows:k.paginatedRows.rows,"show-bulk-actions":!1,"show-header":k.showHeader,"show-table-footer":k.showTableFooter,totals:k.paginatedRows.totals,"show-items-per-page":"",onFilterTable:e(ne),onPaginate:e(re),onProcessAdditionalFilters:n[0]||(n[0]=s=>e(B)({filters:s.filters,term:s.searchTerm,number:s.pageNumber})),onProcessChangeItemsPerPage:e(ie),onSearch:e(ce),onSortColumn:e(de)},{title:d(({row:s,index:m,editRow:I})=>[t("div",Me,[t("a",{href:"#",onClick:J(H=>Q(m,s,I),["prevent"]),class:"allow-click"},o(s.objectTitle),9,Ne)]),s?.objectId?(a(),r("div",Ee,[t("span",De,[t("a",{href:s?.permalink||"#",target:"_blank"},o(e(j)(s?.postTypeLabels?.singular||null)),9,We),n[1]||(n[1]=p(" | ",-1)),t("a",{href:s?.editLink||"#",target:"_blank"},o(e(R)(s?.postTypeLabels?.singular||null)),9,qe),n[2]||(n[2]=p(" | ",-1)),t("a",{href:"#",onClick:J(H=>me(s),["prevent","exact"])},o(g.refreshStatus),9,ze)])])):x("",!0)]),"edit-row":d(({row:s})=>[t("div",Qe,[t("div",Ke,o(g.indexStatusResult),1),t("table",Xe,[n[3]||(n[3]=t("thead",null,[t("tr",null,[t("th"),t("th"),t("th"),t("th")])],-1)),t("tbody",null,[s.lastCrawlTime?(a(),r(F,{key:1},[t("tr",null,[t("th",st,o(e(l).pageFetchState.title)+":",1),t("td",null,[t("div",at,[(a(),u(S(e(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"})),p(" "+o(e(l).pageFetchState.parseValue(s.pageFetchState).value),1)])]),t("th",ot,o(e(l).crawledAs.title)+":",1),t("td",null,[t("div",lt,[(a(),u(S(e(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"})),p(" "+o(e(l).crawledAs.parseValue(s.crawledAs).value),1)])])]),t("tr",null,[t("th",it,o(e(l).indexingState.title),1),t("td",null,[t("div",nt,[(a(),u(S(e(l).indexingState.getIcon(s.indexingState)),{width:"20",height:"20"})),t("div",{innerHTML:M(s,"indexingState")},null,8,rt)])]),t("th",ct,o(e(l).lastCrawlTime.title)+":",1),t("td",null,[t("div",dt,[(a(),u(S(e(l).lastCrawlTime.getIcon(s.lastCrawlTime)),{width:"20",height:"20",color:"#8C8F9A"})),p(" "+o(e(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)])])]),t("tr",null,[t("th",ut,o(e(l).verdict.title)+":",1),t("td",null,[t("div",ht,[(a(),u(S(e(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"})),t("div",{innerHTML:M(s,"verdict")},null,8,pt)])]),t("th",_t,o(e(l).googleCanonical.title)+":",1),t("td",null,[t("div",gt,[(a(),u(S(e(l).googleCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),t("span",{innerHTML:e(l).googleCanonical.parseValue(s.googleCanonical).value},null,8,mt)])])]),t("tr",null,[t("th",bt,o(e(l).robotsTxtState.title)+":",1),t("td",null,[t("div",ft,[(a(),u(S(e(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"})),t("div",{innerHTML:M(s,"robotsTxtState")},null,8,vt)])]),t("th",St,o(e(l).userCanonical.title)+":",1),t("td",null,[t("div",yt,[(a(),u(S(e(l).userCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),t("span",{innerHTML:e(l).userCanonical.parseValue(s.userCanonical).value},null,8,wt)])])]),s?.inspectionResultLink?(a(),r("tr",xt,[t("td",kt,[t("a",{class:"inner-table__inspection-link button-secondary",href:s.inspectionResultLink,target:"_blank"},[p(o(e(c).inspectOnGsc)+" ",1),_(e(D),{width:"12",height:"12"})],8,Ct)])])):x("",!0)],64)):(a(),r("tr",Ye,[t("td",Je,[s.coverageState&&s.indexingState!=="INDEXING_ALLOWED"?(a(),r("span",Ze,o(s.coverageState)+". ",1)):(a(),r("span",et,o(e(c).noResultsYetLowercase)+". ",1)),s?.inspectionResultLink?(a(),r("a",{key:2,class:"inner-table__inspection-link",href:s.inspectionResultLink,target:"_blank"},[p(o(e(c).inspectOnGsc)+" ",1),_(e(D),{width:"12",height:"12"})],8,tt)):x("",!0)])]))])]),s.lastCrawlTime?(a(),r(F,{key:0},[t("div",Tt,[p(o(g.sitemaps)+" ",1),_(e(N),{placement:"right"},{tooltip:d(()=>[p(o(g.sitemapsHelp),1)]),default:d(()=>[_(e(E))]),_:1})]),t("table",Rt,[t("tbody",null,[s.sitemap.length?(a(!0),r(F,{key:0},U(s.sitemap,(m,I)=>(a(),r("tr",{key:`sitemap-${I}`},[t("td",It,[_(e(Z),{width:20,height:20,color:"#8C8F9A"}),t("a",{href:m,target:"_blank"},o(m),9,Lt)])]))),128)):(a(),r("tr",Pt,[t("td",null,o(g.notAvailable),1)]))])]),t("div",Ft,[p(o(g.referringPages)+" ",1),_(e(N),{placement:"right"},{tooltip:d(()=>[p(o(g.referringPagesHelp),1)]),default:d(()=>[_(e(E))]),_:1})]),t("table",At,[t("tbody",null,[s.referringUrls.length?(a(!0),r(F,{key:0},U(s.referringUrls,(m,I)=>(a(),r("tr",{key:`sitemap-${I}`},[t("td",Ot,[_(e(Z),{width:20,height:20,color:"#8C8F9A"}),t("a",{href:m,target:"_blank"},o(m),9,Vt)])]))),128)):(a(),r("tr",Ht,[t("td",null,o(g.notAvailable),1)]))])]),t("div",Ut,[p(o(g.richResultTypes)+" ",1),_(e(N),{placement:"right"},{tooltip:d(()=>[p(o(g.richResultTypesHelp),1)]),default:d(()=>[_(e(E))]),_:1})]),t("table",$t,[n[4]||(n[4]=t("thead",null,[t("tr",null,[t("th"),t("th"),t("th")])],-1)),t("tbody",null,[(s.richResultsResult?.detectedItems||[]).length?(a(!0),r(F,{key:0},U(e(O)(s.richResultsResult),(m,I)=>(a(),r("tr",{key:`rich-result-type-${I}`},[t("th",jt,[t("div",Gt,[(a(),u(S(m.icon),{color:"#8C8F9A",fill:"currentColor"})),t("span",Bt,o(m.label),1)])]),t("td",Mt,[(a(!0),r(F,null,U(m.items,(H,fe)=>(a(),r("div",{class:"rich-result-type-item",key:`rich-result-type-item-${fe}`},[t("b",null,o(H.name),1),H.issues.length?(a(),r("div",Nt,[t("b",null,o(g.issues),1),(a(!0),r(F,null,U(H.issues,(K,ve)=>(a(),r("div",{key:`rich-result-type-item-issue-${ve}`,class:"inner-table__col"},[(a(),u(S(K.icon()))),p(" "+o(K.message),1)]))),128))])):(a(),r("div",Et,[t("div",Dt,[_(e(Ae),{width:"20",height:"20"}),p(" "+o(g.noIssues),1)])]))]))),128))])]))),128)):(a(),r("tr",Wt,[t("td",null,o(g.notAvailable),1)])),s?.richResultsTestLink?(a(),r("tr",qt,[t("td",zt,[t("a",{class:"button-secondary",href:s.richResultsTestLink,target:"_blank"},[p(o(e(c).testWithGoogle)+" ",1),_(e(D),{width:"12",height:"12"})],8,Qt)])])):x("",!0)])])],64)):x("",!0)])]),verdict:d(({row:s})=>[t("div",{title:e(l).verdict.parseValue(s.verdict).value},[(a(),u(S(e(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"}))],8,Kt)]),robotsTxt:d(({row:s})=>[s.lastCrawlTime?(a(),r("div",{key:0,title:e(l).robotsTxtState.parseValue(s.robotsTxtState).value},[(a(),u(S(e(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"}))],8,Xt)):x("",!0)]),crawledAs:d(({row:s})=>[s.lastCrawlTime?(a(),r("div",{key:0,title:e(l).crawledAs.parseValue(s.crawledAs).value},[(a(),u(S(e(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"}))],8,Yt)):x("",!0)]),pageFetch:d(({row:s})=>[s.lastCrawlTime?(a(),r("div",{key:0,title:e(l).pageFetchState.parseValue(s.pageFetchState).value},[(a(),u(S(e(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"}))],8,Jt)):x("",!0)]),richResults:d(({row:s})=>[(s.richResultsResult?.detectedItems||[]).length?(a(!0),r(F,{key:0},U(e(O)(s.richResultsResult),m=>(a(),r("div",{class:"rich-result-type",key:`rich-result-type-${m.label}`},[(a(),u(S(m.icon),{fill:"currentColor"})),t("span",{class:"rich-result-type__label",title:m.label},o(m.label),9,Zt)]))),128)):x("",!0)]),lastCrawlTime:d(({row:s})=>[p(o(e(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)]),buttons:d(({row:s,index:m,editRow:I})=>[_(w,{onClick:H=>Q(m,s,I),type:C.value?.activeRow===m?"blue":"gray",disabled:e(z),class:oe([{active:C.value?.activeRow===m},"btn-toggle-row allow-click"])},{default:d(()=>[_(e(Fe),{width:"20"})]),_:1},8,["onClick","type","disabled","class"]),P.value.has(s.id)?(a(),r("div",es,[_(e(ae))])):x("",!0)]),_:1},8,["additional-filters","selected-filters","columns","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","show-header","show-table-footer","totals","onFilterTable","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])}}},ss={class:"aioseo-donut-chart-with-legend-wrapper"},as={__name:"Index",setup(k){const i=se(),h="all-in-one-seo-pack",v={presenceOnGoogle:f("Presence on Google",h),tooltipPresenceOnGoogle:f("View at a glance how many of your posts have been indexed and discovered by Google.",h),indexOfIndividual:f("Post Index Status",h),tooltipIndexOfIndividual:f("The table below shows the index status of each of your posts, along with any extra information from Google that may be relevant as to why they are not indexed.",h),totalUrls:f("Total Posts",h)},A=$(null),g=$(""),L=G(()=>{const y=i.overview;if(!y)return[];const C=i.options.table.additionalFilters.statusOptions.options.filter(c=>!!c?.value).map(c=>({...c,regex:new RegExp(c.value,"i"),name:c.label,emitValue:c.value,link:"#"}));let l=0;const O=C.map((c,R)=>{const T=y.post.results.filter(V=>c.regex.test(V?.coverageState)).reduce((V,B)=>V+Number(B.count||0),0);return l+=T,{...c,count:T,ratio:R===0?100:y.post.total?T/y.post.total*100:0}}).map(c=>{if(c.value==="unknown|excluded|invalid|error"){const R=y.post.total-l;return{...c,count:c.count+R,ratio:y.post.total?(c.count+R)/y.post.total*100:0}}return c});return O.forEach((c,R)=>(R===0||O.forEach((j,T)=>(R<T&&(c.ratio=c.ratio+j.ratio),c)),c)),O}),P=async y=>{g.value=y,await Te(),A.value.$el.querySelector(".aioseo-wp-additional-filters button").click(),g.value=""};return(y,C)=>(a(),r("div",null,[_(e(Y),{slug:"presenceOnGoogle","header-text":v.presenceOnGoogle,toggles:!1,"no-slide":""},{"header-icon":d(()=>[_(e(Ve),{width:"24",height:"24"})]),tooltip:d(()=>[p(o(v.tooltipPresenceOnGoogle),1)]),default:d(()=>[t("div",ss,[e(i).overview===null?(a(),u(e(ae),{key:0,dark:""})):(a(),u(e(we),{key:1,total:e(i).overview.post.total,parts:L.value,label:v.totalUrls,onOnLabelClick:C[0]||(C[0]=l=>P(l))},null,8,["total","parts","label"]))])]),_:1},8,["header-text"]),_(e(Y),{slug:"indexOfIndividual","header-text":v.indexOfIndividual,toggles:!1,"no-slide":""},{tooltip:d(()=>[p(o(v.tooltipIndexOfIndividual),1)]),default:d(()=>[_(e(ts),{ref_key:"refObjectsTable",ref:A,"paginated-rows":e(i).objects.paginated,"selected-status":g.value},null,8,["paginated-rows","selected-status"])]),_:1},8,["header-text"])]))}},le=He(as,[["__scopeId","data-v-60ce8eda"]]),os={__name:"Blur",setup(k){return(i,h)=>(a(),u(e(Ue),null,{default:d(()=>[_(e(le))]),_:1}))}},ls={__name:"Index",setup(k){const{strings:i}=Ge(),h=ye(),v=W();return(A,g)=>(a(),r("div",null,[e(v).shouldShowSampleReports?x("",!0):(a(),u(e(os),{key:0})),e(v).shouldShowSampleReports?x("",!0):(a(),u(e($e),{key:1,"cta-second-button-action":"",onCtaSecondButtonClick:e(v).showSampleReports,"cta-link":e(X).getPricingUrl("search-statistics","search-statistics-upsell","index-status","liteUpgrade"),"button-text":e(i).ctaButtonText,"second-button-text":e(i).ctaSecondButtonText,"cta-second-button-new-badge":"","cta-second-button-visible":"","learn-more-link":e(X).getUpsellUrl("search-statistics","index-status","liteUpgrade"),"feature-list":[e(i).feature1,e(i).feature2,e(i).feature3,e(i).feature4],"align-top":"","hide-bonus":!e(h).isUnlicensed},{"header-text":d(()=>[p(o(e(i).ctaHeader),1)]),description:d(()=>[_(e(je),{"core-feature":["search-statistics"]}),p(" "+o(e(i).ctaDescription),1)]),_:1},8,["onCtaSecondButtonClick","cta-link","button-text","second-button-text","learn-more-link","feature-list","hide-bonus"]))]))}},Es={__name:"IndexStatus",setup(k){const i=W(),{shouldShowLite:h,shouldShowUpgrade:v}=Be();return(A,g)=>(e(v)("search-statistics","index-status")||e(h))&&!e(i).shouldShowSampleReports?(a(),u(e(ls),{key:0,class:"aioseo-search-statistics-index-status"})):(a(),u(e(le),{key:1,class:oe([{"aioseo-search-statistics-index-status--disable-click":e(i).shouldShowSampleReports},"aioseo-search-statistics-index-status"])},null,8,["class"]))}};export{Es as default};
