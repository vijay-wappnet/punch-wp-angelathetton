import{f as a,i as c,j as t,V as X,P as $,M as x,a0 as v,R as d,U as r,ae as k,v as o,r as R,u as D,O as T,ad as N,Q as I,T as E,au as J,b as Y,e as Z,as as K}from"./vendor-vue-ui.d70c869f.js";import{X as ee,d as se}from"./app-core.61d75c0b.js";import{C as te}from"./Button.7fa2ada4.js";import{_ as M}from"./_plugin-vue_export-helper.eefbdd86.js";import{a as ae,G as re}from"./Row.0a3f58c3.js";import{C as ne}from"./Table.ce454218.js";import{S as z,a as j,d as U,c as q,b as W}from"./Perplexity.9f48d71d.js";import{_ as g,a as w,c as oe}from"./vendor-other.2cdd5822.js";import{C as le}from"./Card.357796d1.js";import{T as ie}from"./Slide.4a56936c.js";import{S as ue}from"./Simple.b65bc73a.js";import{S as ce}from"./Caret.c4a084e6.js";import{S as pe}from"./External.64f546f0.js";import"./vendor-datetime.430013a3.js";import"./vendor-lodash.f9514987.js";import"./Index.104764b8.js";import"./Close.cee3494e.js";import"./Tooltip.7f0ce0d2.js";import"./Download.84de9e91.js";import"./Trash.effd183e.js";const de={__name:"LoaderProgress",props:{show:{type:Boolean,default:!0},duration:{type:Number,default:5},customClass:{type:String,default:""}},setup(S){return(i,b)=>S.show?(a(),c("div",{key:0,class:$(["aioseo-loader-progress",S.customClass])},[t("div",{class:"aioseo-loader-progress__value",style:X({animationDuration:S.duration+"s"})},null,4)],2)):x("",!0)}},_e=M(de,[["__scopeId","data-v-d916a77c"]]),ve={class:"brands-partial"},me={key:0,class:"brands-mentioned"},ge={class:"provider-header"},he={class:"provider-header"},ke={class:"provider-header"},fe={class:"provider-header"},ye={class:"provider-header"},be={class:"rank-cell rank-cell-avg"},H=10,xe={__name:"Brands",props:{report:{type:Object,required:!0}},setup(S){const i="all-in-one-seo-pack",b=S,e={brand:g("Brand",i),rank:g("Rank",i),openAi:g("OpenAI",i),anthropic:g("Claude",i),gemini:g("Gemini",i),deepSeek:g("DeepSeek",i),perplexity:g("Perplexity",i)},h=R(1),l=R("rank"),m=R("asc"),y=D(()=>[{slug:"brand",label:e.brand,sortable:!1,width:"30%",sorted:!1},{slug:"rank",label:e.rank,sortable:!0,width:"100px",sorted:l.value==="rank",sortDir:l.value==="rank"?m.value:"asc"},{slug:"openai",label:e.openAi,sortable:!0,width:"120px",sorted:l.value==="openai",sortDir:l.value==="openai"?m.value:"asc"},{slug:"anthropic",label:e.anthropic,sortable:!0,width:"120px",sorted:l.value==="anthropic",sortDir:l.value==="anthropic"?m.value:"asc"},{slug:"gemini",label:e.gemini,sortable:!0,width:"120px",sorted:l.value==="gemini",sortDir:l.value==="gemini"?m.value:"asc"},{slug:"deepseek",label:e.deepSeek,sortable:!0,width:"120px",sorted:l.value==="deepseek",sortDir:l.value==="deepseek"?m.value:"asc"},{slug:"perplexity",label:e.perplexity,sortable:!0,width:"120px",sorted:l.value==="perplexity",sortDir:l.value==="perplexity"?m.value:"asc"}]),_=D(()=>b.report?.brands?Object.entries(b.report.brands).map(([f,n])=>({name:f,rank:n.rank||0,scores:{openai:n.openai||null,anthropic:n.anthropic||null,gemini:n.gemini||null,deepseek:n.deepseek||null,perplexity:n.perplexity||null}})).sort((f,n)=>{let P,A;if(l.value==="rank")P=f.rank||0,A=n.rank||0;else{if(P=f.scores[l.value]||null,A=n.scores[l.value]||null,P===null&&A===null)return 0;if(P===null)return 1;if(A===null)return-1}const O=typeof P=="number"?P:parseFloat(P)||0,V=typeof A=="number"?A:parseFloat(A)||0;return m.value==="asc"?O-V:V-O}):[]),s=D(()=>{const p=_.value.length,f=Math.ceil(p/H);return{total:p,pages:f,per_page:H}}),u=D(()=>{const p=(h.value-1)*H,f=p+H;return _.value.slice(p,f)}),F=p=>{h.value=p},C=p=>{h.value=1,p.slug===l.value?m.value=m.value==="asc"?"desc":"asc":(l.value=p.slug,m.value="asc")},L=p=>p?parseFloat(p.toFixed(1)):"-",B=p=>!p||p==="-"||p===null?"":`rank-cell-${parseInt(p,10)}`,Q=p=>{const f=parseInt(p,10);return w(oe("%1$s brand mentioned","%1$s brands mentioned",f,i),f)};return(p,f)=>(a(),c("div",ve,[v(o(ne),{columns:y.value,rows:u.value,totals:s.value,"initial-page-number":h.value,"show-search":!1,"show-pagination":!0,"show-bulk-actions":!1,"show-header":!0,"show-table-footer":!0,"initial-items-per-page":10,onPaginate:F,onSortColumn:C},{tablenav:d(()=>[b.report?.brands_mentioned?(a(),c("div",me,r(Q(b.report.brands_mentioned)),1)):x("",!0)]),brandHeaderFooter:d(()=>[k(r(e.brand),1)]),rankHeaderFooter:d(()=>[k(r(e.rank),1)]),openaiHeaderFooter:d(()=>[t("span",ge,[v(o(W)),k(" "+r(e.openAi),1)])]),anthropicHeaderFooter:d(()=>[t("span",he,[v(o(q)),k(" "+r(e.anthropic),1)])]),geminiHeaderFooter:d(()=>[t("span",ke,[v(o(U)),k(" "+r(e.gemini),1)])]),deepseekHeaderFooter:d(()=>[t("span",fe,[v(o(j)),k(" "+r(e.deepSeek),1)])]),perplexityHeaderFooter:d(()=>[t("span",ye,[v(o(z)),k(" "+r(e.perplexity),1)])]),brand:d(({row:n})=>[k(r(n.name),1)]),rank:d(({row:n})=>[t("span",be,r(L(n.rank)),1)]),openai:d(({row:n})=>[t("span",{class:$(["rank-cell",B(n.scores.openai)])},r(n.scores.openai||"-"),3)]),anthropic:d(({row:n})=>[t("span",{class:$(["rank-cell",B(n.scores.anthropic)])},r(n.scores.anthropic||"-"),3)]),gemini:d(({row:n})=>[t("span",{class:$(["rank-cell",B(n.scores.gemini)])},r(n.scores.gemini||"-"),3)]),deepseek:d(({row:n})=>[t("span",{class:$(["rank-cell",B(n.scores.deepseek)])},r(n.scores.deepseek||"-"),3)]),perplexity:d(({row:n})=>[t("span",{class:$(["rank-cell",B(n.scores.perplexity)])},r(n.scores.perplexity||"-"),3)]),_:1},8,["columns","rows","totals","initial-page-number"])]))}},Ce=M(xe,[["__scopeId","data-v-eebaee3c"]]),Se={},$e={focusable:"false",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-globe",fill:"currentColor",viewBox:"2 2 20 20"};function we(S,i){return a(),c("svg",$e,[...i[0]||(i[0]=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},null,-1)])])}const G=M(Se,[["render",we]]),Re={class:"report-results-partial"},Fe={class:"providers-list"},Pe=["onClick"],Ae={class:"provider-entry-main"},Ie={class:"provider-info"},Le={class:"provider-icon"},Be={class:"provider-name"},De={class:"provider-metrics"},He={key:0,class:"metric-badge"},Te={class:"metric-badge"},Me={class:"expand-button"},Ne={key:0,class:"brands-list-section"},Oe=["innerHTML"],Ve={key:2,class:"sources-section"},Ee={class:"sources-header"},Ge={class:"sources-title"},ze={class:"sources-list"},je=["href"],Ue={class:"source-content"},qe={class:"source-title"},We={class:"source-url"},Qe={class:"source-link-button"},Xe={__name:"ReportResults",props:{report:{type:Object,required:!0}},setup(S){const i="all-in-one-seo-pack",b=S,e=R(null),h={aiEngineResults:g("AI Engine Results",i),tooltip:g("Results from different AI engines",i),sourcesCount:w(g("%1$s sources",i),"%1$s"),brandsCount:w(g("%1$s brands",i),"%1$s"),webSearchSources:w(g("%1$s Web Search Sources",i),"%1$s")},l=D(()=>{if(!b.report?.results||!Array.isArray(b.report.results))return[];const y={openai:"OpenAI",anthropic:"Claude",gemini:"Gemini",deepseek:"DeepSeek",perplexity:"Perplexity"};return b.report.results.map(_=>{const s=_.brands?.length||0,u=_.sources?.length||0;return{key:_.provider,name:y[_.provider]||_.provider,brandsCount:s,sourcesCount:0<u?u:null,data:_}}).sort((_,s)=>{const u=["openai","anthropic","gemini","deepseek","perplexity"];return u.indexOf(_.key)-u.indexOf(s.key)})}),m=y=>{e.value===y?e.value=null:e.value=y};return(y,_)=>(a(),c("div",Re,[v(o(le),{slug:"ai-engine-results",toggles:!1,"no-slide":""},{header:d(()=>[k(r(h.aiEngineResults),1)]),tooltip:d(()=>[k(r(h.tooltip),1)]),default:d(()=>[t("div",Fe,[(a(!0),c(T,null,N(l.value,s=>(a(),c("div",{key:s.key,class:$(["provider-entry",{"is-expanded":e.value===s.key}]),onClick:u=>m(s.key)},[t("div",Ae,[t("div",Ie,[t("div",Le,[s.key==="anthropic"?(a(),I(o(q),{key:0})):s.key==="deepseek"?(a(),I(o(j),{key:1})):s.key==="perplexity"?(a(),I(o(z),{key:2})):s.key==="gemini"?(a(),I(o(U),{key:3})):s.key==="openai"?(a(),I(o(W),{key:4})):x("",!0)]),t("span",Be,r(s.name),1)]),t("div",De,[s.sourcesCount?(a(),c("div",He,[v(o(G),{class:"badge-icon"}),t("span",null,r(o(w)(h.sourcesCount,s.sourcesCount)),1)])):x("",!0),t("div",Te,[t("span",null,r(o(w)(h.brandsCount,s.brandsCount)),1)]),t("button",Me,[v(o(ue),{class:$({rotated:e.value===s.key})},null,8,["class"])])])]),v(o(ie),{active:e.value===s.key},{default:d(()=>[e.value===s.key?(a(),c("div",{key:0,class:"provider-details",onClick:_[1]||(_[1]=E(()=>{},["stop"]))},[s.data.brands&&0<s.data.brands.length?(a(),c("div",Ne,[(a(!0),c(T,null,N(s.data.brands,u=>(a(),c("div",{key:u.name,class:"brand-tag"},r(u.name)+" ("+r(o(w)("#%1$s",u.position))+") ",1))),128))])):x("",!0),s.data.overview?(a(),c("div",{key:1,class:"provider-overview",innerHTML:s.data.overview},null,8,Oe)):x("",!0),s.sourcesCount&&s.data.sources&&0<s.data.sources.length?(a(),c("div",Ve,[t("div",Ee,[t("h3",Ge,[v(o(G),{class:"sources-globe-icon"}),k(" "+r(o(w)(h.webSearchSources,s.sourcesCount))+" ",1),v(o(ce),{class:$(["sources-chevron",{rotated:e.value===s.key}])},null,8,["class"])])]),t("div",ze,[(a(!0),c(T,null,N(s.data.sources,(u,F)=>(a(),c("a",{key:F,href:u.url,target:"_blank",rel:"noopener noreferrer",class:"source-entry",onClick:_[0]||(_[0]=E(()=>{},["stop"]))},[t("div",Ue,[t("h4",qe,r(u.title||u.name||u.url),1),t("span",We,r(u.url),1)]),t("span",Qe,[v(o(pe))])],8,je))),128))])])):x("",!0)])):x("",!0)]),_:2},1032,["active"])],10,Pe))),128))])]),_:1})]))}},Je=M(Xe,[["__scopeId","data-v-ab253c0a"]]),Ye={class:"aioseo-ai-insights-report"},Ze={class:"back-link"},Ke={key:0,class:"loading-state"},es={key:0,class:"report-title"},ss={key:2,class:"report-content"},ts={key:0,class:"report-section"},as={key:3,class:"error-state"},Ss={__name:"Report",setup(S){const i="all-in-one-seo-pack",b=J(),e=R(null),h=R(!0),l=R(!1),m=R(null),y={backToReports:g("Back to Reports",i),resultsFor:g("Results for:",i),loadingResultsFor:g("Loading results for:",i),errorLoading:g("Error loading report.",i)},_=async()=>{const F=b.params.uuid;if(!F){h.value=!1;return}try{const C=await ee.get(se.restUrl(`ai/insights/reports/${F}`)).then(L=>L.body);C.success&&C.data?.report?(e.value=C.data.report,["pending","processing"].includes(e.value?.status)&&s(),["completed","failed"].includes(e.value?.status)&&u()):(e.value=null,u())}catch(C){console.error("Error fetching report:",C),e.value=null,u()}finally{h.value=!1}},s=()=>{l.value||(l.value=!0,m.value=setInterval(_,5e3))},u=()=>{l.value=!1,m.value&&(clearInterval(m.value),m.value=null)};return Y(()=>{h.value=!0,_()}),Z(()=>{u()}),(F,C)=>{const L=K("router-link");return a(),c("div",Ye,[v(o(re),null,{default:d(()=>[v(o(ae),null,{default:d(()=>[t("div",Ze,[v(L,{to:{name:"keyword-reports"}},{default:d(()=>[k(" ‚Üê "+r(y.backToReports),1)]),_:1})]),h.value?(a(),c("div",Ke,[v(o(te),{dark:!0})])):(a(),c(T,{key:1},[e.value?(a(),c("h1",es,[k(r(l.value?y.loadingResultsFor:y.resultsFor)+' "',1),t("strong",null,r(e.value.keyword),1),C[0]||(C[0]=k('" ',-1))])):x("",!0),l.value&&e.value&&(e.value.status==="pending"||e.value.status==="processing")?(a(),I(o(_e),{key:1,duration:15})):x("",!0),e.value?(a(),c("div",ss,[e.value.status==="completed"?(a(),c("div",ts,[v(Ce,{report:e.value},null,8,["report"]),v(Je,{report:e.value},null,8,["report"])])):x("",!0)])):(a(),c("div",as,[t("p",null,r(y.errorLoading),1)]))],64))]),_:1})]),_:1})])}}};export{Ss as default};
