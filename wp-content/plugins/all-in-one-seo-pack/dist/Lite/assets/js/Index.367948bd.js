import{f as $,i as U,O as pe,ad as ve,j as a,Q as L,S as me,U as i,a0 as d,R as u,v as m,aG as j,b as fe,ae as C,P as O,T as I,u as M,r as v,as as q,M as K,af as ge}from"./vendor-vue-ui.d70c869f.js";import{L as ye,d as B,X as T,b as _e}from"./app-core.61d75c0b.js";import{C as E}from"./Index.104764b8.js";import{C as H}from"./Card.357796d1.js";import{a as he,G as be}from"./Row.0a3f58c3.js";import{S as ke,a as we,b as Ce,c as Se,d as Ae}from"./Perplexity.9f48d71d.js";import{S as $e}from"./AiContent.45f0abae.js";import{_ as W}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as r,c as Y}from"./vendor-other.2cdd5822.js";import{C as Re}from"./Index.67f2fc23.js";import{C as De}from"./Table.ce454218.js";import{S as xe}from"./Close.cee3494e.js";import{S as Pe}from"./Caret.c4a084e6.js";import{_ as z}from"./Button.7fa2ada4.js";import"./vendor-datetime.430013a3.js";import"./vendor-lodash.f9514987.js";import"./Tooltip.7f0ce0d2.js";import"./Trash.effd183e.js";import"./Slide.4a56936c.js";import"./Download.84de9e91.js";const Me={class:"ai-providers"},Ie={class:"ai-provider-icon"},Be={class:"ai-provider-name"},Te={__name:"AiProviders",setup(F){const o=[{id:"gemini",name:"Gemini"},{id:"anthropic",name:"Claude"},{id:"openai",name:"OpenAI"},{id:"deepseek",name:"DeepSeek"},{id:"perplexity",name:"Perplexity"}],S={gemini:Ae,anthropic:Se,openai:Ce,deepseek:we,perplexity:ke};return(R,f)=>($(),U("div",Me,[($(),U(pe,null,ve(o,c=>a("div",{key:c.id,class:"ai-provider"},[a("div",Ie,[($(),L(me(S[c.id])))]),a("span",Be,i(c.name),1)])),64))]))}},Ue={class:"promotional-alert"},Le={class:"promotional-alert-content"},Fe={class:"promotional-alert-icon"},Ve={class:"promotional-alert-text"},Ge={__name:"PromotionalAlert",setup(F){const S={promotionalAlertText:r("Our new AI-powered keyword reports are 100% free for a limited time only. Enjoy!","all-in-one-seo-pack")};return(R,f)=>($(),U("div",Ue,[d(m(E),{type:"blue"},{default:u(()=>[a("div",Le,[a("div",Fe,[d(m($e))]),a("div",Ve,[a("span",null,i(S.promotionalAlertText),1)])])]),_:1})]))}},ze=W(Ge,[["__scopeId","data-v-1f971962"]]),Ee=["onClick"],Ne={class:"row-actions"},Oe=["onClick"],qe=["onClick"],Ke={class:"trash"},Ye=["onClick"],je=["title"],He={class:"aioseo-modal-body"},We=["innerHTML"],Qe={__name:"ReportsTable",setup(F){const o="all-in-one-seo-pack",S=j(),R=v([]),f=v(!1),c=v(1),y=v(10),A=v(""),l=v("created"),_=v("desc"),n=v("all"),h=v({total:0,pages:1,per_page:10}),x=v(null),b=v(!1),p=v(null),P=v(null),g={reports:r("Reports",o),reportsTooltip:r("View and manage your keyword ranking reports generated by AI-powered analysis.",o),filterByStatus:r("Filter by Status",o),allStatuses:r("All Statuses",o),pending:r("Pending",o),processing:r("Processing",o),completed:r("Completed",o),failed:r("Failed",o),viewReport:r("View Report",o),regenerate:r("Regenerate",o),delete:r("Delete",o),actionCannotBeUndone:r("This action cannot be undone.",o),noChangedMind:r("No, I changed my mind",o)},Q=[{label:g.delete,value:"delete"}],X=[{name:"status",label:g.filterByStatus,options:[{value:"all",label:g.allStatuses},{value:"pending",label:g.pending},{value:"processing",label:g.processing},{value:"completed",label:g.completed},{value:"failed",label:g.failed}]}],J=M(()=>({status:n.value})),Z=M(()=>[{slug:"keyword",label:r("Keyword",o),sortable:!0,sortDir:l.value==="keyword"?_.value:"asc",sorted:l.value==="keyword",width:"40%"},{slug:"status",label:r("Status",o),sortable:!0,sortDir:l.value==="status"?_.value:"asc",sorted:l.value==="status"},{slug:"brandsMentioned",label:r("Brands",o),sortable:!0,sortDir:l.value==="brandsMentioned"?_.value:"asc",sorted:l.value==="brandsMentioned"},{slug:"created",label:r("Created",o),sortable:!0,sortDir:l.value==="created"?_.value:"desc",sorted:l.value==="created"},{slug:"actions",label:"",sortable:!1,width:"50px"}]),ee=s=>s.map(e=>({id:e.uuid||"",uuid:e.uuid||"",keyword:e.keyword||"-",status:e.status||"pending",brandsMentioned:e.brands_mentioned||null,created:e.created_at||new Date().toISOString()})),D=async()=>{f.value=!0;try{const s=c.value===1?0:(c.value-1)*y.value,e={};l.value&&(e.orderBy=l.value),_.value&&(e.orderDir=_.value),y.value&&(e.limit=y.value),s!==null&&(e.offset=s),A.value&&(e.searchTerm=A.value),n.value&&n.value!=="all"&&(e.status=n.value);let t=B.restUrl("ai/insights/reports");const k=new URLSearchParams(e).toString();k&&(t+="?"+k);const w=await T.get(t).then(G=>G.body);w.success&&w.data?.reports&&(R.value=ee(w.data.reports),h.value={total:w.data.total,pages:Math.ceil(w.data.total/y.value),per_page:y.value})}catch(s){console.error("Error fetching reports:",s)}finally{f.value=!1}},V=s=>{S.push({name:"keyword-reports",params:{uuid:s}})},te=async s=>{if(!(!s||!s.uuid||P.value===s.uuid)){P.value=s.uuid;try{const e=await T.post(B.restUrl(`ai/insights/reports/${s.uuid}/regenerate`)).then(t=>t.body);e.success&&e.data?.uuid?S.push({name:"keyword-reports",params:{uuid:e.data.uuid}}):(console.error("Failed to regenerate report:",e),P.value=null)}catch(e){console.error("Error regenerating report:",e),P.value=null}}},se=s=>{s&&(p.value=s,b.value=!0)},N=M(()=>Array.isArray(p.value)?p.value.length:1),ae=M(()=>Y("Are you sure you want to delete this report?","Are you sure you want to delete these reports?",N.value,o)),oe=M(()=>Y("Yes, I want to delete this report","Yes, I want to delete these reports",N.value,o)),re=async()=>{const s=Array.isArray(p.value)?p.value:[p.value];if(s.length)if(s.length===1){const e=s[0];if(x.value===e)return;x.value=e;try{const t=await T.delete(B.restUrl(`ai/insights/reports/${e}`)).then(k=>k.body);t.success?(D(),b.value=!1,p.value=null):console.error("Failed to delete report:",t)}catch(t){console.error("Error deleting report:",t)}finally{x.value=null}}else await ce()},le=s=>{c.value=s,D()},ne=s=>{A.value=s,c.value=1,D()},ie=s=>{s.slug===l.value?_.value=_.value==="asc"?"desc":"asc":(l.value=s.slug,_.value=s.sortDir||"asc"),c.value=1,D()},ue=s=>{const e=s.filters||s;n.value=e.status||"all",c.value=1,D()},de=async s=>{const{action:e,selectedRows:t}=s;e==="delete"&&t&&t.length&&(p.value=t,b.value=!0)},ce=async()=>{const s=Array.isArray(p.value)?p.value:[p.value];if(s.length){f.value=!0;try{const e=s.map(w=>T.delete(B.restUrl(`ai/insights/reports/${w}`)).then(G=>G.body)),t=await Promise.all(e);t.every(w=>w.success)?(await D(),b.value=!1,p.value=null):console.error("Some reports failed to delete:",t)}catch(e){console.error("Error deleting reports:",e)}finally{f.value=!1}}};return fe(()=>{D()}),(s,e)=>($(),L(m(H),{slug:"reports","header-text":g.reports,toggles:!1,"no-slide":""},{tooltip:u(()=>[C(i(g.reportsTooltip),1)]),default:u(()=>[d(m(De),{ref:"table",columns:Z.value,rows:R.value,loading:f.value||P.value!==null,totals:h.value,"show-pagination":"","show-bulk-actions":"","show-search":"","bulk-options":Q,"additional-filters":X,"selected-filters":J.value,onPaginate:le,onSearch:ne,onProcessBulkAction:de,onProcessAdditionalFilters:ue,onSortColumn:ie},{keyword:u(({row:t})=>[a("strong",null,[a("a",{href:"#",onClick:I(k=>V(t.uuid),["prevent"])},i(t.keyword),9,Ee)]),a("div",Ne,[a("span",null,[a("a",{href:"#",class:"view",onClick:I(k=>V(t.uuid),["prevent"])},[a("span",null,i(g.viewReport),1)],8,Oe),e[4]||(e[4]=C(" | ",-1))]),a("span",null,[a("a",{href:"#",class:O(["regenerate",{regenerating:P.value===t.uuid}]),onClick:I(k=>te(t),["prevent"])},[a("span",null,i(g.regenerate),1)],10,qe),e[5]||(e[5]=C(" | ",-1))]),a("span",Ke,[a("a",{href:"#",class:"submitdelete",onClick:I(k=>se(t.uuid),["prevent"])},[a("span",null,i(g.delete),1)],8,Ye)])])]),status:u(({row:t})=>[a("span",{class:O(["status-badge",`status-${t.status}`])},i(t.status),3)]),brandsMentioned:u(({row:t})=>[C(i(t.brandsMentioned||"-"),1)]),created:u(({row:t})=>[a("span",{title:t.created?new Date(t.created).toLocaleString():"-"},i(t.created?m(ye)(new Date(t.created),"M j, Y"):"-"),9,je)]),actions:u(({row:t})=>[d(m(z),{type:"gray",class:"btn-toggle-row allow-click",onClick:k=>V(t.uuid)},{default:u(()=>[d(m(Pe),{width:"20"})]),_:1},8,["onClick"])]),_:1},8,["columns","rows","loading","totals","selected-filters"]),d(m(Re),{show:b.value,"no-header":"",onClose:e[3]||(e[3]=t=>b.value=!1)},{body:u(()=>[a("div",He,[a("button",{class:"close",onClick:e[1]||(e[1]=I(t=>b.value=!1,["stop"]))},[d(m(xe),{onClick:e[0]||(e[0]=t=>b.value=!1)})]),a("h3",null,i(ae.value),1),a("div",{class:"reset-description",innerHTML:g.actionCannotBeUndone},null,8,We),d(m(z),{type:"blue",size:"medium",onClick:re,loading:x.value!==null||f.value},{default:u(()=>[C(i(oe.value),1)]),_:1},8,["loading"]),d(m(z),{type:"gray",size:"medium",onClick:e[2]||(e[2]=t=>b.value=!1)},{default:u(()=>[C(i(g.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"]))}},Xe=W(Qe,[["__scopeId","data-v-2fe2f1af"]]),Je={class:"aioseo-ai-insights"},Ze={class:"keyword-intro"},et={class:"keyword-title"},tt={class:"keyword-description"},st={class:"keyword-form"},Ct={__name:"Index",setup(F){const o="all-in-one-seo-pack",S=j(),R=_e(),f=v(""),c=v(!1),y=v(""),A=M(()=>R.aioseo?.aiInsights?.rateLimit?.reached?R.aioseo?.aiInsights?.rateLimit?.message:!1),l={title:r("Discover Which Brands Rank in AI Search Results",o),description:r("Get a detailed report on which brands rank for a particular query or keyword, and how they perform in AI search results.",o),placeholder:r('e.g. "best dog food for puppies"',o),analyze:r("Generate",o),errorCreatingReport:r("An error occurred while creating the report. Please try again.",o)},_=async()=>{if(!(!f.value||c.value)){c.value=!0,y.value="";try{const n=await T.post(B.restUrl("ai/insights/reports")).send({keyword:f.value}).then(h=>h.body);n.success&&n.data?.uuid?S.push({name:"keyword-reports",params:{uuid:n.data.uuid}}):y.value=n.data?.message||n.message||l.errorCreatingReport}catch(n){n.response&&n.response.body?y.value=n.response.body.message||n.message:y.value=n.message||l.errorCreatingReport}finally{c.value=!1}}};return(n,h)=>{const x=q("base-input"),b=q("base-button");return $(),U("div",Je,[d(m(be),null,{default:u(()=>[d(m(he),null,{default:u(()=>[d(ze),A.value?($(),L(m(E),{key:0,type:"red",onCloseAlert:h[0]||(h[0]=p=>n.showRateLimitAlert=!1)},{default:u(()=>[C(i(A.value),1)]),_:1})):K("",!0),d(m(H),{slug:"queryReport",toggles:!1,"hide-header":"","no-slide":""},{default:u(()=>[a("div",Ze,[a("h2",et,i(l.title),1),a("p",tt,i(l.description),1),d(Te),a("div",st,[d(x,{modelValue:f.value,"onUpdate:modelValue":h[1]||(h[1]=p=>f.value=p),placeholder:l.placeholder,disabled:!!A.value,onKeyup:ge(_,["enter"])},null,8,["modelValue","placeholder","disabled"]),d(b,{type:"blue",onClick:_,loading:c.value,disabled:!f.value||c.value||!!A.value},{default:u(()=>[C(i(l.analyze),1)]),_:1},8,["loading","disabled"])]),y.value?($(),L(m(E),{key:0,type:"red",onCloseAlert:h[2]||(h[2]=p=>y.value="")},{default:u(()=>[C(i(y.value),1)]),_:1})):K("",!0)])]),_:1}),d(Xe)]),_:1})]),_:1})])}}};export{Ct as default};
